{"remainingRequest":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\babel-loader\\lib\\index.js!D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\vuetify-loader\\lib\\loader.js!D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\src\\views\\main\\pedido\\pedido.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\src\\views\\main\\pedido\\pedido.vue","mtime":1583590622900},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580396460146},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1580396457614},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1580396518341},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580396460146},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1580396514635}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport { tusPedidoConfirmadoUrl, MotivoAnularPedidoUrl } from '../../../packages/config';\nexport default {\n  data: function data() {\n    return {\n      paginador: {},\n      pedido: {},\n      pageQuery: '',\n      dialog: false,\n      pedidoId: null,\n      motivoAnulacion: \"\",\n      maxLengthTextArea: 130\n    };\n  },\n  watch: {\n    $route: function $route(to, from) {\n      this.initializeData();\n      this.getTusPedidos();\n    }\n  },\n  created: function created() {\n    this.initializeData();\n    this.getTusPedidos();\n  },\n  methods: {\n    getTusPedidos: function getTusPedidos() {\n      var _this = this;\n\n      var urlFormada = '';\n\n      if (this.pageQuery == null) {\n        urlFormada = tusPedidoConfirmadoUrl;\n      } else {\n        urlFormada = tusPedidoConfirmadoUrl + '?page=' + this.pageQuery;\n      }\n\n      this.$myApi.get(urlFormada).then(function (response) {\n        _this.paginando(response.data);\n\n        _this.pedido = response.data.data;\n      });\n    },\n    initializeData: function initializeData() {\n      this.pageQuery = this.$route.query.page == null ? null : this.$route.query.page;\n    },\n    motivoAnularPeido: function motivoAnularPeido() {\n      var _this2 = this;\n\n      this.$validator.validate().then(function (result) {\n        if (result) {\n          var objPedido = {\n            motivo_anulacion: _this2.motivoAnulacion,\n            fecha_anulacion: moment().format('YYYY-MM-DD HH:MM:SS'),\n            pedido_id: _this2.pedidoId\n          };\n          console.log(objPedido);\n\n          _this2.$myApi.post(MotivoAnularPedidoUrl, objPedido).then(function (response) {\n            if (response.data.updated == true) {\n              _this2.getTusPedidos();\n\n              _this2.closeDialog();\n            }\n          });\n        }\n      });\n    },\n    openDialog: function openDialog(pedId) {\n      this.pedidoId = pedId;\n      this.dialog = true;\n    },\n    closeDialog: function closeDialog(pedId) {\n      this.pedidoId = null;\n      this.dialog = false;\n      this.motivoAnulacion = \"\";\n    },\n    paginando: function paginando(data) {\n      var objPaginador = {\n        current_page: data.current_page,\n        last_page: data.last_page,\n        //le sumo mas 1 para sustraer la posicion correcta de mi string\n        next_page_url: data.next_page_url == null ? null : data.next_page_url.substring(data.next_page_url.indexOf('=') + 1, data.next_page_url.length),\n        prev_page_url: data.prev_page_url == null ? null : data.prev_page_url.substring(data.prev_page_url.indexOf('=') + 1, data.prev_page_url.length)\n      };\n      this.paginador = objPaginador;\n    }\n  }\n};",{"version":3,"sources":["pedido.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <v-container grid-list-xl >\r\n        <v-layout wrap justify-space-between pa-3 >\r\n            <h2>Tus pedidos</h2>\r\n        </v-layout>\r\n        <div v-if=\"this.pedido.length > 0\">\r\n        <div style=\"border: 1px solid rgba(0,0,0,0.12); margin-bottom: 24px;\" v-for=\"(order,index) in this.pedido\" :key=\"index\">\r\n            <v-layout wrap justify-space-between  style=\"background-color: rgba(0,0,0,0.12); margin:0px\">\r\n                <v-flex xs8 md2 sm2 >\r\n                    FECHA PEDIDO \r\n                    <br>\r\n                    {{order.created_at}}\r\n                    <!-- 10 de diciembre de 2019 -->\r\n                </v-flex>\r\n                <v-flex xs4 md1 sm1 >\r\n                    TOTAL\r\n                    <br>\r\n                    {{order.total}}\r\n                    <!-- 1200.00 Bs. -->\r\n                </v-flex>\r\n                 <v-flex xs12 md5 sm5 >\r\n                    ENVIAR\r\n                    <br>\r\n                    {{order.direction[0].direction}}\r\n                    <!-- 1200.00 Bs. -->\r\n                </v-flex>\r\n                <v-flex xs6 md2 sm2 >\r\n                    ESTADO\r\n                    <p>{{order.estado}} </p>\r\n                </v-flex>\r\n                <v-flex xs6 md2 sm2 >\r\n                    PEDIDO NÂ° {{order.id}} \r\n                    <v-btn\r\n                    v-if=\"order.estado=='confirmado'\"\r\n                    small\r\n                    flat \r\n                    round\r\n                    color=\"red\"\r\n                    dark\r\n                    @click=\"openDialog(order.id)\"\r\n                    >\r\n                    cancelar pedido\r\n                    </v-btn>\r\n\r\n    <v-dialog v-model=\"dialog\" persistent max-width=\"400px\">\r\n\r\n      <v-card>\r\n        <v-card-title>\r\n          <span class=\"headline\">Anular Pedido</span>\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <v-container grid-list-md>\r\n            <v-layout wrap>\r\n              <v-flex xs12 sm12 md12>\r\n                <v-textarea :maxlength=\"maxLengthTextArea\"\r\n                    v-validate=\"'required'\"\r\n                    :error-messages=\"errors.collect('motivoAnulacion '+(index+1))\"\r\n                    v-model=\"motivoAnulacion\" label=\"Motivo de anulacion de Pedido\" required></v-textarea>\r\n                <label>{{maxLengthTextArea-motivoAnulacion.length}}</label>\r\n              </v-flex>\r\n             \r\n            </v-layout>\r\n          </v-container>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"blue darken-1\" flat @click=\"closeDialog()\">cerrar</v-btn>\r\n          <v-btn color=\"red\" flat @click=\"motivoAnularPeido()\">confirmar</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n                </v-flex>\r\n            </v-layout>\r\n            <div v-for=\"(cart,index) in order.carrito\" :key=\"index\">\r\n                <v-layout wrap justify-space-between pt-3>\r\n                    <v-flex xs12 md2 sm2 >\r\n                        <router-link :to=\"{ name: 'productDetail',params: { id: cart.product.id }}\">\r\n                            <v-img\r\n                            :src= cart.product.file[0].path\r\n                            aspect-ratio=\"2\"\r\n                            contain\r\n                            >\r\n                            </v-img>\r\n                        </router-link>\r\n                    </v-flex>\r\n                    <v-flex xs12 md5 sm5 >\r\n                            <v-flex md12 xs12 py-0 > \r\n                                <router-link :to=\"{ name: 'productDetail',params: { id: cart.product_id } }\">\r\n                                    <h3 class=\"text-justify\">{{cart.product.name}}</h3>\r\n                                </router-link>\r\n                            </v-flex>\r\n                    </v-flex>\r\n                    <v-flex xs12 md3 sm3 style=\"display:flex; color: #D90000;\" >\r\n                        <v-flex md12 xs12 py-0 > \r\n                            <h3>{{cart.product.price | moneda }}</h3> <p class=\"margin-price\"> &nbsp; Bs.</p>\r\n                        </v-flex>\r\n                    </v-flex>\r\n                </v-layout>\r\n                <v-divider ></v-divider>\r\n            </div>\r\n        </div>\r\n            <div class=\"pagination\">\r\n                <v-btn class=\"ma-2\" \r\n                    :to=\"{ name: 'pedido',query: { page: paginador.prev_page_url } }\" \r\n                    outline color=\"secondary\"  exact\r\n                    :disabled=\"!paginador.prev_page_url\">\r\n                      anterior\r\n                </v-btn> \r\n                <span>Pagina {{paginador.current_page}} de {{paginador.last_page}}</span>\r\n                <v-btn class=\"ma-2\" \r\n                    :to=\"{ name: 'pedido',query: { page: paginador.next_page_url }}\" \r\n                    outline color=\"secondary\"  exact\r\n                    :disabled=\"!paginador.next_page_url\">\r\n                      siguiente\r\n               </v-btn>\r\n            </div>\r\n        </div>\r\n        <div v-else>\r\n            No tienes ningun pedido echo.\r\n        </div>\r\n    </v-container>\r\n</template>\r\n\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport {tusPedidoConfirmadoUrl,MotivoAnularPedidoUrl} from '../../../packages/config'\r\nexport default {\r\n     data () {\r\n        return {\r\n            paginador:{},\r\n            pedido : {},\r\n            pageQuery:'',\r\n            dialog: false,\r\n            pedidoId:null,\r\n            motivoAnulacion:\"\",\r\n            maxLengthTextArea:130\r\n        }\r\n    },\r\n    watch: { \r\n      $route (to, from) {\r\n        this.initializeData()\r\n        this.getTusPedidos()\r\n      }\r\n    },\r\n    created(){\r\n        this.initializeData()\r\n        this.getTusPedidos()\r\n    },\r\n    methods:{\r\n        getTusPedidos(){\r\n            var urlFormada=''\r\n            if(this.pageQuery == null){\r\n                urlFormada = tusPedidoConfirmadoUrl\r\n            }\r\n            else{\r\n                urlFormada = tusPedidoConfirmadoUrl+'?page='+this.pageQuery\r\n            }\r\n            this.$myApi.get(urlFormada)\r\n                .then(response => {\r\n                    this.paginando(response.data)\r\n                    this.pedido = response.data.data;\r\n                });\r\n            },\r\n        initializeData(){\r\n            this.pageQuery = this.$route.query.page == null ? null : this.$route.query.page;\r\n        },\r\n        motivoAnularPeido(){\r\n            this.$validator.validate().then(result => {\r\n                if (result) {\r\n                    let objPedido = {\r\n                        motivo_anulacion:this.motivoAnulacion,\r\n                        fecha_anulacion: moment().format('YYYY-MM-DD HH:MM:SS'),\r\n                        pedido_id: this.pedidoId\r\n                    }\r\n                    console.log(objPedido)\r\n                    this.$myApi.post(MotivoAnularPedidoUrl,objPedido)\r\n                        .then(response => {\r\n                            if(response.data.updated ==true){\r\n                                this.getTusPedidos()\r\n                                this.closeDialog()\r\n                            }\r\n                        });\r\n                }\r\n            });\r\n        },\r\n        \r\n        openDialog(pedId){\r\n            this.pedidoId = pedId\r\n            this.dialog = true\r\n        },\r\n        closeDialog(pedId){\r\n            this.pedidoId = null\r\n            this.dialog = false\r\n            this.motivoAnulacion=\"\"\r\n        },\r\n        paginando(data){\r\n            let objPaginador = {\r\n                current_page: data.current_page,\r\n                last_page: data.last_page,\r\n                //le sumo mas 1 para sustraer la posicion correcta de mi string\r\n                next_page_url: data.next_page_url == null ? null : data.next_page_url.substring(data.next_page_url.indexOf('=')+1, data.next_page_url.length),\r\n                prev_page_url: data.prev_page_url == null ? null : data.prev_page_url.substring(data.prev_page_url.indexOf('=')+1, data.prev_page_url.length)\r\n            }\r\n            this.paginador = objPaginador\r\n        }\r\n    }\r\n}\r\n</script>"],"sourceRoot":"src\\views\\main\\pedido"}]}