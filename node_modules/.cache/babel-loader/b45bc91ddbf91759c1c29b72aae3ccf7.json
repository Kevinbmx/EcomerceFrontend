{"remainingRequest":"D:\\kevin\\proyectos\\vue\\trovare_frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\kevin\\proyectos\\vue\\trovare_frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\kevin\\proyectos\\vue\\trovare_frontend\\src\\store\\modules\\auth.js","dependencies":[{"path":"D:\\kevin\\proyectos\\vue\\trovare_frontend\\src\\store\\modules\\auth.js","mtime":1553870447683},{"path":"D:\\kevin\\proyectos\\vue\\trovare_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\kevin\\proyectos\\vue\\trovare_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\kevin\\proyectos\\vue\\trovare_frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _Promise from \"D:\\\\kevin\\\\proyectos\\\\vue\\\\trovare_frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\n// import Vue from 'vue'\nimport axios from 'axios'; // import Auth from '../packages/Auth.js'\n\nimport { loginUrlCustom, logoutUrl, registertUrl } from '../../packages/config'; // Vue.use(Auth)\n\nvar state = {\n  token: localStorage.getItem('access_token') || null\n};\nvar getters = {\n  loggedIn: function loggedIn() {\n    return state.token !== null;\n  }\n};\nvar mutations = {\n  retrieveToken: function retrieveToken(state, token) {\n    state.token = token;\n  },\n  destroyToken: function destroyToken(state) {\n    state.token = null;\n  }\n};\nvar actions = {\n  retrieveToken: function retrieveToken(context, credentials) {\n    return new _Promise(function (resolve, reject) {\n      axios.post(loginUrlCustom, {\n        username: credentials.username,\n        password: credentials.password\n      }).then(function (response) {\n        var token = response.data.access_token;\n        localStorage.setItem('access_token', token);\n        context.commit('retrieveToken', token);\n        resolve(response); // console.log(response);\n      }).catch(function (error) {\n        // console.log(error)\n        reject(error);\n      });\n    }); // commit('SET_AUTH_USER',userObj)\n  },\n  destroyToken: function destroyToken(context) {\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + context.state.token;\n\n    if (context.getters.loggedIn) {\n      return new _Promise(function (resolve, reject) {\n        axios.post(logoutUrl).then(function (response) {\n          localStorage.removeItem('access_token');\n          context.commit('destroyToken');\n          resolve(response); // console.log(response);\n          // context.commit('addTodo', response.data)\n        }).catch(function (error) {\n          localStorage.removeItem('access_token');\n          context.commit('destroyToken');\n          reject(error);\n        });\n      });\n    }\n  },\n  register: function register(context, data) {\n    return new _Promise(function (resolve, reject) {\n      axios.post(registertUrl, {\n        name: data.name,\n        email: data.email,\n        password: data.password\n      }).then(function (response) {\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n};",{"version":3,"sources":["D:\\kevin\\proyectos\\vue\\trovare_frontend\\src\\store\\modules\\auth.js"],"names":["axios","loginUrlCustom","logoutUrl","registertUrl","state","token","localStorage","getItem","getters","loggedIn","mutations","retrieveToken","destroyToken","actions","context","credentials","resolve","reject","post","username","password","then","response","data","access_token","setItem","commit","catch","error","defaults","headers","common","removeItem","register","name","email"],"mappings":"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","sourcesContent":["// import Vue from 'vue'\r\nimport axios from 'axios'\r\n// import Auth from '../packages/Auth.js'\r\nimport {loginUrlCustom,logoutUrl,registertUrl} from '../../packages/config'\r\n\r\n// Vue.use(Auth)\r\nconst state = {\r\n  token: localStorage.getItem('access_token') || null,\r\n}\r\n\r\nconst getters={\r\n  loggedIn(){\r\n    return state.token !== null\r\n  }\r\n}\r\n\r\nconst mutations = {\r\n  retrieveToken(state, token) {\r\n    state.token = token\r\n  },\r\n\r\n\r\n  destroyToken(state) {\r\n    state.token = null\r\n  },\r\n}\r\n\r\nconst actions = {\r\n\r\n  retrieveToken (context, credentials){\r\n    return new Promise((resolve, reject) => {\r\n      axios.post(loginUrlCustom,{\r\n        username: credentials.username,\r\n        password: credentials.password,\r\n      })\r\n      .then(response=>{\r\n        const token = response.data.access_token\r\n        localStorage.setItem('access_token', token)\r\n        context.commit('retrieveToken', token)\r\n        resolve(response)\r\n        // console.log(response);\r\n      })\r\n      .catch(error =>{\r\n        // console.log(error)\r\n            reject(error)\r\n      })\r\n    })\r\n    // commit('SET_AUTH_USER',userObj)\r\n  },\r\n\r\n  destroyToken(context) {\r\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + context.state.token\r\n\r\n    if (context.getters.loggedIn) {\r\n      return new Promise((resolve, reject) => {\r\n        axios.post(logoutUrl)\r\n          .then(response => {\r\n            localStorage.removeItem('access_token')\r\n            context.commit('destroyToken')\r\n            resolve(response)\r\n            // console.log(response);\r\n            // context.commit('addTodo', response.data)\r\n          })\r\n          .catch(error => {\r\n            localStorage.removeItem('access_token')\r\n            context.commit('destroyToken')\r\n            reject(error)\r\n          })\r\n      })\r\n    }\r\n  },\r\n  register(context, data) {\r\n    return new Promise((resolve, reject) => {\r\n      axios.post(registertUrl, {\r\n        name: data.name,\r\n        email: data.email,\r\n        password: data.password,\r\n      })\r\n        .then(response => {\r\n          resolve(response)\r\n        })\r\n        .catch(error => {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n\r\n}\r\n\r\n\r\nexport default{\r\n  state, getters, mutations, actions\r\n}\r\n"]}]}