{"remainingRequest":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\babel-loader\\lib\\index.js!D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\src\\store\\modules\\admin\\product.js","dependencies":[{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\src\\store\\modules\\admin\\product.js","mtime":1592788643979},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580396460146},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1580396457614},{"path":"D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\node_modules\\eslint-loader\\index.js","mtime":1580396469731}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\kevin\\\\proyectos\\\\vuejs\\\\EcomerceFrontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Promise from \"D:\\\\kevin\\\\proyectos\\\\vuejs\\\\EcomerceFrontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"D:\\\\kevin\\\\proyectos\\\\vuejs\\\\EcomerceFrontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport * as firebase from 'firebase';\nimport { getField, updateField } from 'vuex-map-fields';\nimport { productUrl, characteristicUrl, fileUrl, categoryUrl, statusProductUrl } from '../../../packages/config';\nimport { async } from 'q';\nvar strict = true;\nvar state = {\n  products: [],\n  productObj: {\n    generateUuid: '',\n    id: null,\n    name: '',\n    modelo: '',\n    quantity: '',\n    brand: '',\n    price: '',\n    category_id: null,\n    // category_id:undefined,\n    peso: '',\n    alto: '',\n    ancho: '',\n    fondo: '',\n    parent_id: 0,\n    // statusProduct_id:null,\n    statusProduct_id: null,\n    description: '' // uniqueCode:'',\n\n  },\n  categories: [],\n  status: [],\n  characteristics: [{\n    id: '',\n    characteristicName: '',\n    state: 'new'\n  }],\n  files: [{\n    id: '',\n    name: '',\n    file: '',\n    url: '',\n    uuid: '',\n    state: 'new'\n  }],\n  fileForDelete: [],\n  maxUploadImage: 4,\n  userFirebase: 'kevi3195@gmail.com',\n  passFirebase: 'secret!123'\n};\nvar getters = {\n  getField: getField,\n  fileGetter: function fileGetter(state) {\n    return state.files;\n  },\n  ProductGetter: function ProductGetter(state) {\n    return state.products;\n  },\n  categoriesGetter: function categoriesGetter(state) {\n    return state.categories;\n  },\n  statusGetter: function statusGetter(state) {\n    return state.status;\n  }\n};\nvar mutations = {\n  updateField: updateField,\n  fillcategories: function fillcategories(state, response) {\n    state.categories = response;\n  },\n  fillStatus: function fillStatus(state, response) {\n    state.status = response;\n  },\n  addCharacteristic: function addCharacteristic(state) {\n    state.characteristics.push({\n      id: '',\n      characteristicName: '',\n      state: 'new'\n    });\n  },\n  fillProducts: function fillProducts(state, response) {\n    state.products = response;\n  },\n  fillProductById: function fillProductById(state, response) {\n    state.productObj = _defineProperty({\n      generateUuid: '',\n      id: response.id,\n      name: response.name,\n      modelo: response.modelo,\n      brand: response.brand,\n      category_id: response.category_id,\n      quantity: response.quantity,\n      price: response.price,\n      peso: response.peso,\n      alto: response.alto,\n      ancho: response.ancho,\n      fondo: response.fondo,\n      statusProduct_id: response.statusProduct_id,\n      description: response.description,\n      parent_id: 0\n    }, \"description\", response.description);\n  },\n  fillCharacteristicByProductId: function fillCharacteristicByProductId(state, response) {\n    var arrayOfCharacteristic = [];\n\n    for (var index = 0; index < response.length; index++) {\n      var element = response[index];\n      arrayOfCharacteristic.push({\n        id: element.id,\n        characteristicName: element.characteristic,\n        state: 'edit'\n      });\n    }\n\n    state.characteristics = arrayOfCharacteristic;\n  },\n  fillFileByProductId: function fillFileByProductId(state, response) {\n    var arrayOfFile = [];\n\n    for (var index = 0; index < response.length; index++) {\n      var element = response[index];\n      arrayOfFile.push({\n        id: element.id,\n        name: element.name,\n        file: '',\n        url: element.path,\n        uuid: '',\n        state: 'old'\n      });\n    }\n\n    state.files = arrayOfFile;\n  },\n  putImage: function putImage(state, response) {\n    var element = state.files[response.index];\n    var estado = 'new';\n\n    if (element.state == 'old') {\n      var objfileDelete = {\n        id: element.id,\n        url: element.url\n      };\n      state.fileForDelete.push(objfileDelete);\n      estado = 'new';\n    }\n\n    element.id = '';\n    element.name = '';\n    element.file = response.file;\n    element.url = response.url;\n    element.uuid = response.uuid;\n    element.state = estado;\n  },\n  deleteCharacteristic: function deleteCharacteristic(state, objCharact) {\n    var estado = objCharact.state;\n    var index = objCharact.index;\n\n    if (estado == 'edit' && state.characteristics[index].state == 'edit') {\n      // console.log(index)\n      state.characteristics[index].state = 'delete';\n    } else if (state.characteristics[index].state == 'new' || state.characteristics[index].state == 'delete') {\n      state.characteristics.splice(index, 1);\n    }\n  },\n  //------------llenado de producto------------\n  generateUuid: function generateUuid(state, AddProductObj) {\n    state.productObj.generateUuid = AddProductObj;\n  },\n  NameProduct: function NameProduct(state, AddProductObj) {\n    state.productObj.name = AddProductObj;\n  },\n  modeloProduct: function modeloProduct(state, AddProductObj) {\n    state.productObj.modelo = AddProductObj;\n  },\n  quantityProduct: function quantityProduct(state, AddProductObj) {\n    state.productObj.quantity = AddProductObj;\n  },\n  brandProduct: function brandProduct(state, AddProductObj) {\n    state.productObj.brand = AddProductObj;\n  },\n  priceProduct: function priceProduct(state, AddProductObj) {\n    state.productObj.price = AddProductObj;\n  },\n  category_idProduct: function category_idProduct(state, AddProductObj) {\n    state.productObj.category_id = AddProductObj;\n  },\n  pesoProduct: function pesoProduct(state, AddProductObj) {\n    state.productObj.peso = AddProductObj;\n  },\n  altoProduct: function altoProduct(state, AddProductObj) {\n    state.productObj.alto = AddProductObj;\n  },\n  anchoProduct: function anchoProduct(state, AddProductObj) {\n    state.productObj.ancho = AddProductObj;\n  },\n  fondoProduct: function fondoProduct(state, AddProductObj) {\n    state.productObj.fondo = AddProductObj;\n  },\n  parent_idProduct: function parent_idProduct(state, AddProductObj) {\n    state.productObj.parent_id = AddProductObj;\n  },\n  statusProduct_idProduct: function statusProduct_idProduct(state, AddProductObj) {\n    state.productObj.statusProduct_id = AddProductObj;\n  },\n  updateDescription: function updateDescription(state, AddProductObj) {\n    state.productObj.description = AddProductObj;\n  },\n  //---------------------------------------------------\n  //---------------adicionando imagen------------------\n  deleteFileImage: function deleteFileImage(state, index) {\n    var element = state.files[index];\n\n    if (element.state == 'old') {\n      var objfileDelete = {\n        id: element.id,\n        name: element.name,\n        url: element.url\n      };\n      state.fileForDelete.push(objfileDelete);\n    }\n\n    state.files.splice(index, 1);\n  },\n  CreateAndUpdateProductSubmit: function CreateAndUpdateProductSubmit(state, productId) {\n    state.productObj.id = productId;\n  },\n  clearFields: function clearFields(state) {\n    state.productObj = {\n      generateUuid: '',\n      id: null,\n      name: '',\n      modelo: '',\n      quantity: '',\n      brand: '',\n      price: '',\n      category_id: null,\n      peso: '',\n      alto: '',\n      ancho: '',\n      fondo: '',\n      parent_id: 0,\n      statusProduct_id: null,\n      description: ''\n    }, state.categories = [], state.status = [], state.characteristics = [{\n      id: '',\n      characteristicName: '',\n      state: 'new'\n    }], state.files = [{\n      id: '',\n      name: '',\n      file: '',\n      url: '',\n      uuid: '',\n      state: 'new'\n    }, state.fileForDelete = []];\n  },\n  addFileImage: function addFileImage() {\n    state.files.push({\n      id: '',\n      name: '',\n      file: '',\n      url: '',\n      uuid: '',\n      state: 'new'\n    });\n  },\n  emptyFile: function emptyFile(state, index) {\n    var element = state.files[index];\n\n    if (element.state == 'old') {\n      var objfileDelete = {\n        id: element.id,\n        name: element.name,\n        url: element.url\n      };\n      state.fileForDelete.push(objfileDelete);\n    }\n\n    element.id = '';\n    element.url = '';\n    element.state = 'new';\n    element.uuid = '';\n  },\n  addingImageFirebase: function addingImageFirebase(state, objFile) {\n    var resultadoNew = state.files.filter(function (file) {\n      return file.state === 'new';\n    });\n    var element = resultadoNew[objFile.index];\n    element.url = objFile.urlFirebase;\n    element.name = objFile.name;\n  },\n  CreateAndUpdateCharacteristic: function CreateAndUpdateCharacteristic(state, objCharact) {\n    state.characteristics[objCharact.index].id = objCharact.id;\n  },\n  createAndUpdateFileProduct: function createAndUpdateFileProduct(state, objFile) {\n    var element = state.files[objFile.index];\n    element.id = objFile.id;\n    element.name = objFile.name;\n  },\n  deleteImageFirebaseAndDataBase: function deleteImageFirebaseAndDataBase(state) {\n    state.fileForDelete = [];\n  }\n};\nvar actions = {\n  fillcategories: function fillcategories(context) {\n    this.$myApi.get(categoryUrl).then(function (response) {\n      context.commit('fillcategories', response.data.CategoryTree);\n    });\n  },\n  fillStatus: function fillStatus(context) {\n    this.$myApi.get(statusProductUrl).then(function (response) {\n      context.commit('fillStatus', response.data);\n    });\n  },\n  fillProducts: function fillProducts(context) {\n    var _this = this;\n\n    return new _Promise(function (resolve, reject) {\n      _this.$myApi.get(productUrl).then(function (response) {\n        resolve(response.data.hasPermission);\n        context.commit('fillProducts', response.data.productWithUser);\n      }).catch(function (error) {\n        console.log(error);\n        reject(error);\n      });\n    });\n  },\n  fillProductById: function fillProductById(context, object) {\n    var _this2 = this;\n\n    return new _Promise(function (resolve, reject) {\n      // console.log('estoy en llenado de producto', object)\n      var auth = object.auth;\n      var id = object.id;\n\n      _this2.$myApi.get(productUrl + '/' + id).then(function (response) {\n        resolve(response.data.hasPermission);\n        context.commit('fillProductById', response.data.ProductById);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  },\n  fillCharacteristicByProductId: function fillCharacteristicByProductId(context, object) {\n    var auth = object.auth;\n    var id = object.id;\n    this.$myApi.get(characteristicUrl + '/' + id).then(function (response) {\n      context.commit('fillCharacteristicByProductId', response.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  },\n  fillFileByProductId: function fillFileByProductId(context, object) {\n    var auth = object.auth;\n    var id = object.id;\n    this.$myApi.get(fileUrl + '/' + id).then(function (response) {\n      context.commit('fillFileByProductId', response.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  },\n  addFile: function addFile(context, objFile) {\n    context.commit('addFile', objFile);\n  },\n  deleteCharacteristic: function deleteCharacteristic(context, objcharacteristic) {\n    context.commit('deleteCharacteristic', objcharacteristic);\n  },\n  deleteFileImage: function deleteFileImage(context, number) {\n    context.commit('deleteFileImage', number);\n  },\n  addFileImage: function addFileImage(context) {\n    context.commit('addFileImage');\n  },\n  emptyFile: function emptyFile(context, index) {\n    context.commit('emptyFile', index);\n  },\n  //creando en la base de datos\n  CreateAndUpdateProductSubmit: function () {\n    var _CreateAndUpdateProductSubmit = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee(context, object) {\n      var auth, method, id, url, data, response;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              auth = object.auth;\n              method = object.method;\n              id = object.productId;\n              url = productUrl;\n\n              if (method == 'put') {\n                url = productUrl + '/' + id;\n              } // console.log('number one')\n              // console.log(auth)\n\n\n              _context.prev = 5;\n              data = state.productObj;\n              _context.next = 9;\n              return this.$myApi.post(url, {\n                name: data.name,\n                modelo: data.modelo,\n                quantity: data.quantity,\n                brand: data.brand,\n                price: data.price,\n                category_id: data.category_id,\n                peso: data.peso,\n                alto: data.alto,\n                ancho: data.ancho,\n                fondo: data.fondo,\n                parent_id: 0,\n                description: data.description,\n                statusProduct_id: data.statusProduct_id\n              });\n\n            case 9:\n              response = _context.sent;\n\n              if (response.data.create) {\n                console.log('producto registrado con exito', response.data.create);\n              }\n\n              if (response.data.update) {\n                console.log('producto actualizado con exito', response.data.update);\n              }\n\n              context.commit('CreateAndUpdateProductSubmit', response.data.product_id);\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](5);\n              console.log(_context.t0);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[5, 15]]);\n    }));\n\n    function CreateAndUpdateProductSubmit(_x, _x2) {\n      return _CreateAndUpdateProductSubmit.apply(this, arguments);\n    }\n\n    return CreateAndUpdateProductSubmit;\n  }(),\n  //add image in farebase\n  uploadImageFirebase: function uploadImageFirebase(context, fileForInsert) {\n    return new _Promise(function (resolve, reject) {\n      var _loop = function _loop(index) {\n        var element = fileForInsert[index];\n        var uuid = element.uuid; // console.log('element', element)\n        // console.log('uuid', uuid)\n        // console.log(state.files[index])\n\n        firebase.auth().signInWithEmailAndPassword(state.userFirebase, state.passFirebase).then(function (user) {\n          var storageRef = firebase.storage().ref();\n          var metadata = {\n            contentType: element.file[0].type\n          };\n          var filename = element.file[0].name;\n          var ext = filename.slice(filename.lastIndexOf('.'));\n          var uploadTask = storageRef.child('products/' + uuid + ext).put(element.file[0], metadata);\n          uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, function (snapshot) {\n            var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n            console.log('[' + index + ']' + 'Upload is ' + progress + '% done');\n\n            switch (snapshot.state) {\n              case firebase.storage.TaskState.PAUSED:\n                console.log('Upload is paused');\n                break;\n\n              case firebase.storage.TaskState.RUNNING:\n                console.log('Upload is running');\n                break;\n            }\n          }, function (error) {\n            switch (error.code) {\n              case 'storage/unauthorized':\n                // User doesn't have permission to access the object\n                break;\n\n              case 'storage/canceled':\n                // User canceled the upload\n                break;\n\n              case 'storage/unknown':\n                // Unknown error occurred, inspect error.serverResponse\n                break;\n            }\n          }, function complete() {\n            // Upload completed successfully, now we can get the download URL\n            uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\n              var objectFile = {\n                index: index,\n                name: uuid + ext,\n                urlFirebase: downloadURL // //   console.log('tama;o Imagen', state.maxUploadImage-1)\n\n              };\n              context.commit('addingImageFirebase', objectFile);\n              console.log('File available at', downloadURL);\n\n              if (fileForInsert.length == index + 1) {\n                console.log('entro para que siga el procedimiento');\n                resolve(true);\n              }\n            });\n          });\n        });\n      };\n\n      for (var index = 0; index < fileForInsert.length; index++) {\n        _loop(index);\n      }\n    });\n  },\n  addingImageFirebase: function addingImageFirebase(context) {\n    return new _Promise(function (resolve, reject) {\n      var countFile = state.files.length;\n      var resultadoNew = state.files.filter(function (file) {\n        return file.state === 'new';\n      });\n\n      if (resultadoNew.length > 0) {\n        context.dispatch('uploadImageFirebase', resultadoNew).then(function (response) {\n          if (response) {\n            resolve(true);\n            console.log('entro a insertar la imagen');\n          }\n        });\n      } else {\n        resolve(true);\n        console.log('no hay que subir');\n      }\n    }); // console.log('resultado de estado mew',resultado)\n    // console.log('resultado contador de files',countFile)\n    // for (let index = 0; index < state.files.length; index++) {\n    //     const element = state.files[index];\n    //     const uuid = state.files[index].uuid ;\n    // console.log('element', element)\n    // console.log('uuid', uuid)\n    // console.log(state.files[index])\n    // if(element.state == 'new' || element.state =='update'){\n    //     context.dispatch('uploadImageFirebase',element).then((response) => {\n    //         if(index == (state.files.length-1)){\n    //             resolve(true)\n    //         }\n    //     })\n    // }\n    // }\n  },\n  CreateAndUpdateCharacteristic: function CreateAndUpdateCharacteristic(context, object) {\n    var _this3 = this;\n\n    try {\n      var auth = object.auth;\n      var id = object.productId;\n      var url = '';\n\n      var _loop2 = function _loop2(index) {\n        var element = state.characteristics[index];\n\n        if (element.state == 'edit' || element.state == 'new') {\n          if (element.state == 'edit') {\n            url = characteristicUrl + '/' + element.id;\n          } else if (element.state == 'new') {\n            url = characteristicUrl;\n          }\n\n          _this3.$myApi.post(url, {\n            product_id: state.productObj.id,\n            characteristic: element.characteristicName\n          }).then(function (response) {\n            var objCharact = {\n              id: response.data.id,\n              index: index\n            };\n            context.commit('CreateAndUpdateCharacteristic', objCharact); // console.log('caracteristica '+response.data.type+' con exito', response.data )\n          });\n        } else {\n          url = characteristicUrl + '/' + element.id;\n\n          _this3.$myApi.delete(url).then(function (response) {\n            console.log('se elimino correctamente', response);\n            var obj = {\n              index: index,\n              state: 'delete' // context.commit('deleteCharacteristic',obj)\n\n            };\n            console.log('caracteristica ' + response.data.type + ' con exito', response.data);\n          });\n        }\n      };\n\n      for (var index = 0; index < state.characteristics.length; index++) {\n        _loop2(index);\n      }\n    } catch (ex) {\n      console.log(ex);\n    }\n  },\n  createAndUpdateFileProduct: function createAndUpdateFileProduct(context, object) {\n    var _this4 = this;\n\n    try {\n      var auth = object.auth;\n      var url = fileUrl;\n\n      var _loop3 = function _loop3(index) {\n        var element = state.files[index];\n\n        if (element.state == 'update' || element.state == 'new') {\n          if (element.state == 'update') {\n            url = url + '/' + element.id;\n          }\n\n          _this4.$myApi.post(url, {\n            product_id: state.productObj.id,\n            name: element.name,\n            path: element.url\n          }).then(function (response) {\n            var objCharact = {\n              id: response.id,\n              name: response.name,\n              index: index\n            };\n            context.commit('createAndUpdateFileProduct', objCharact);\n            console.log('imagenes registradas con exito', response.data.saved);\n          });\n        }\n      };\n\n      for (var index = 0; index < state.files.length; index++) {\n        _loop3(index);\n      }\n    } catch (ex) {\n      console.log(ex);\n    }\n  },\n  deleteImageFirebaseAndDataBase: function deleteImageFirebaseAndDataBase(context, object) {\n    var _this5 = this;\n\n    var auth = object.auth;\n\n    if (state.fileForDelete.length > 0) {\n      firebase.auth().signInWithEmailAndPassword(state.userFirebase, state.passFirebase).then(function (user) {\n        for (var index = 0; index < state.fileForDelete.length; index++) {\n          var element = state.fileForDelete[index];\n          var storage = firebase.storage();\n          var storageRef = storage.ref();\n          var desertRef = storageRef.child('/products/' + element.name);\n          desertRef.delete().then(function () {\n            console.log('se elimino correctamente de firebase su imagen');\n          }).catch(function (error) {// Uh-oh, an error occurred!\n          });\n\n          _this5.$myApi.delete(fileUrl + '/' + element.id).then(function (response) {\n            console.log('imagen eliminada correctamente de la base de datos');\n          });\n        }\n\n        context.commit('deleteImageFirebaseAndDataBase');\n      });\n    }\n  },\n  putImage: function putImage(context, object) {\n    context.commit('putImage', object);\n  },\n  clearFields: function clearFields(context) {\n    context.commit('clearFields');\n  },\n  addCharacteristic: function addCharacteristic(context) {\n    context.commit('addCharacteristic');\n  }\n};\nexport default {\n  strict: strict,\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n};",{"version":3,"sources":["D:\\kevin\\proyectos\\vuejs\\EcomerceFrontend\\src\\store\\modules\\admin\\product.js"],"names":["firebase","getField","updateField","productUrl","characteristicUrl","fileUrl","categoryUrl","statusProductUrl","async","strict","state","products","productObj","generateUuid","id","name","modelo","quantity","brand","price","category_id","peso","alto","ancho","fondo","parent_id","statusProduct_id","description","categories","status","characteristics","characteristicName","files","file","url","uuid","fileForDelete","maxUploadImage","userFirebase","passFirebase","getters","fileGetter","ProductGetter","categoriesGetter","statusGetter","mutations","fillcategories","response","fillStatus","addCharacteristic","push","fillProducts","fillProductById","fillCharacteristicByProductId","arrayOfCharacteristic","index","length","element","characteristic","fillFileByProductId","arrayOfFile","path","putImage","estado","objfileDelete","deleteCharacteristic","objCharact","splice","AddProductObj","NameProduct","modeloProduct","quantityProduct","brandProduct","priceProduct","category_idProduct","pesoProduct","altoProduct","anchoProduct","fondoProduct","parent_idProduct","statusProduct_idProduct","updateDescription","deleteFileImage","CreateAndUpdateProductSubmit","productId","clearFields","addFileImage","emptyFile","addingImageFirebase","objFile","resultadoNew","filter","urlFirebase","CreateAndUpdateCharacteristic","createAndUpdateFileProduct","deleteImageFirebaseAndDataBase","actions","context","$myApi","get","then","commit","data","CategoryTree","resolve","reject","hasPermission","productWithUser","catch","error","console","log","object","auth","ProductById","addFile","objcharacteristic","number","method","post","create","update","product_id","uploadImageFirebase","fileForInsert","signInWithEmailAndPassword","user","storageRef","storage","ref","metadata","contentType","type","filename","ext","slice","lastIndexOf","uploadTask","child","put","on","TaskEvent","STATE_CHANGED","snapshot","progress","bytesTransferred","totalBytes","TaskState","PAUSED","RUNNING","code","complete","getDownloadURL","downloadURL","objectFile","countFile","dispatch","delete","obj","ex","saved","desertRef"],"mappings":";;;;;;;;AAAA,OAAO,KAAKA,QAAZ,MAA0B,UAA1B;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,iBAAtC;AACA,SAAQC,UAAR,EAAmBC,iBAAnB,EAAqCC,OAArC,EAA6CC,WAA7C,EAAyDC,gBAAzD,QAAgF,0BAAhF;AACA,SAASC,KAAT,QAAsB,GAAtB;AAEA,IAAMC,MAAM,GAAG,IAAf;AACA,IAAMC,KAAK,GAAG;AACVC,EAAAA,QAAQ,EAAC,EADC;AAEVC,EAAAA,UAAU,EAAC;AACPC,IAAAA,YAAY,EAAC,EADN;AAEPC,IAAAA,EAAE,EAAC,IAFI;AAGPC,IAAAA,IAAI,EAAE,EAHC;AAIPC,IAAAA,MAAM,EAAE,EAJD;AAKPC,IAAAA,QAAQ,EAAC,EALF;AAMPC,IAAAA,KAAK,EAAC,EANC;AAOPC,IAAAA,KAAK,EAAC,EAPC;AAQPC,IAAAA,WAAW,EAAC,IARL;AASP;AACAC,IAAAA,IAAI,EAAC,EAVE;AAWPC,IAAAA,IAAI,EAAC,EAXE;AAYPC,IAAAA,KAAK,EAAC,EAZC;AAaPC,IAAAA,KAAK,EAAC,EAbC;AAcPC,IAAAA,SAAS,EAAC,CAdH;AAeP;AACAC,IAAAA,gBAAgB,EAAC,IAhBV;AAiBPC,IAAAA,WAAW,EAAC,EAjBL,CAkBP;;AAlBO,GAFD;AAsBVC,EAAAA,UAAU,EAAC,EAtBD;AAuBVC,EAAAA,MAAM,EAAC,EAvBG;AAwBVC,EAAAA,eAAe,EAAC,CACZ;AACIhB,IAAAA,EAAE,EAAC,EADP;AAEIiB,IAAAA,kBAAkB,EAAC,EAFvB;AAGIrB,IAAAA,KAAK,EAAC;AAHV,GADY,CAxBN;AA+BVsB,EAAAA,KAAK,EAAC,CACF;AACIlB,IAAAA,EAAE,EAAC,EADP;AAEIC,IAAAA,IAAI,EAAC,EAFT;AAGIkB,IAAAA,IAAI,EAAC,EAHT;AAIIC,IAAAA,GAAG,EAAC,EAJR;AAKIC,IAAAA,IAAI,EAAC,EALT;AAMIzB,IAAAA,KAAK,EAAC;AANV,GADE,CA/BI;AAyCV0B,EAAAA,aAAa,EAAG,EAzCN;AA0CVC,EAAAA,cAAc,EAAC,CA1CL;AA2CVC,EAAAA,YAAY,EAAC,oBA3CH;AA4CVC,EAAAA,YAAY,EAAC;AA5CH,CAAd;AA+CA,IAAMC,OAAO,GAAC;AACVvC,EAAAA,QAAQ,EAARA,QADU;AAEVwC,EAAAA,UAAU,EAAE,oBAAC/B,KAAD,EAAW;AACnB,WAAOA,KAAK,CAACsB,KAAb;AACH,GAJS;AAKVU,EAAAA,aAAa,EAAC,uBAAChC,KAAD,EAAW;AACrB,WAAOA,KAAK,CAACC,QAAb;AACH,GAPS;AAQVgC,EAAAA,gBAAgB,EAAC,0BAACjC,KAAD,EAAS;AACtB,WAAOA,KAAK,CAACkB,UAAb;AACH,GAVS;AAWVgB,EAAAA,YAAY,EAAC,sBAAClC,KAAD,EAAS;AAClB,WAAOA,KAAK,CAACmB,MAAb;AACH;AAbS,CAAd;AAgBA,IAAMgB,SAAS,GAAG;AACd3C,EAAAA,WAAW,EAAXA,WADc;AAEd4C,EAAAA,cAFc,0BAECpC,KAFD,EAEOqC,QAFP,EAEgB;AAC1BrC,IAAAA,KAAK,CAACkB,UAAN,GAAmBmB,QAAnB;AACH,GAJa;AAKdC,EAAAA,UALc,sBAKHtC,KALG,EAKGqC,QALH,EAKY;AACtBrC,IAAAA,KAAK,CAACmB,MAAN,GAAekB,QAAf;AACH,GAPa;AAQdE,EAAAA,iBARc,6BAQIvC,KARJ,EAQU;AACpBA,IAAAA,KAAK,CAACoB,eAAN,CAAsBoB,IAAtB,CAA2B;AACvBpC,MAAAA,EAAE,EAAC,EADoB;AAEvBiB,MAAAA,kBAAkB,EAAC,EAFI;AAGvBrB,MAAAA,KAAK,EAAC;AAHiB,KAA3B;AAKH,GAda;AAedyC,EAAAA,YAfc,wBAeDzC,KAfC,EAeKqC,QAfL,EAec;AACxBrC,IAAAA,KAAK,CAACC,QAAN,GAAiBoC,QAAjB;AACH,GAjBa;AAkBdK,EAAAA,eAlBc,2BAkBE1C,KAlBF,EAkBQqC,QAlBR,EAkBiB;AAC3BrC,IAAAA,KAAK,CAACE,UAAN;AACIC,MAAAA,YAAY,EAAC,EADjB;AAEIC,MAAAA,EAAE,EAAGiC,QAAQ,CAACjC,EAFlB;AAGIC,MAAAA,IAAI,EAAGgC,QAAQ,CAAChC,IAHpB;AAIIC,MAAAA,MAAM,EAAG+B,QAAQ,CAAC/B,MAJtB;AAKIE,MAAAA,KAAK,EAAG6B,QAAQ,CAAC7B,KALrB;AAMIE,MAAAA,WAAW,EAAG2B,QAAQ,CAAC3B,WAN3B;AAOIH,MAAAA,QAAQ,EAAG8B,QAAQ,CAAC9B,QAPxB;AAQIE,MAAAA,KAAK,EAAG4B,QAAQ,CAAC5B,KARrB;AASIE,MAAAA,IAAI,EAAG0B,QAAQ,CAAC1B,IATpB;AAUIC,MAAAA,IAAI,EAAGyB,QAAQ,CAACzB,IAVpB;AAWIC,MAAAA,KAAK,EAAGwB,QAAQ,CAACxB,KAXrB;AAYIC,MAAAA,KAAK,EAAGuB,QAAQ,CAACvB,KAZrB;AAaIE,MAAAA,gBAAgB,EAAGqB,QAAQ,CAACrB,gBAbhC;AAcIC,MAAAA,WAAW,EAAGoB,QAAQ,CAACpB,WAd3B;AAeIF,MAAAA,SAAS,EAAC;AAfd,sBAgBgBsB,QAAQ,CAACpB,WAhBzB;AAkBH,GArCa;AAsCd0B,EAAAA,6BAtCc,yCAsCgB3C,KAtChB,EAsCsBqC,QAtCtB,EAsC+B;AACzC,QAAIO,qBAAqB,GAAG,EAA5B;;AACA,SAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGR,QAAQ,CAACS,MAArC,EAA6CD,KAAK,EAAlD,EAAsD;AAClD,UAAME,OAAO,GAAGV,QAAQ,CAACQ,KAAD,CAAxB;AACAD,MAAAA,qBAAqB,CAACJ,IAAtB,CAA2B;AACvBpC,QAAAA,EAAE,EAAC2C,OAAO,CAAC3C,EADY;AAEvBiB,QAAAA,kBAAkB,EAAG0B,OAAO,CAACC,cAFN;AAGvBhD,QAAAA,KAAK,EAAC;AAHiB,OAA3B;AAKH;;AACDA,IAAAA,KAAK,CAACoB,eAAN,GAAwBwB,qBAAxB;AACH,GAjDa;AAkDdK,EAAAA,mBAlDc,+BAkDMjD,KAlDN,EAkDYqC,QAlDZ,EAkDqB;AAC/B,QAAIa,WAAW,GAAG,EAAlB;;AACA,SAAK,IAAIL,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGR,QAAQ,CAACS,MAArC,EAA6CD,KAAK,EAAlD,EAAsD;AAClD,UAAME,OAAO,GAAGV,QAAQ,CAACQ,KAAD,CAAxB;AACAK,MAAAA,WAAW,CAACV,IAAZ,CAAiB;AACbpC,QAAAA,EAAE,EAAC2C,OAAO,CAAC3C,EADE;AAEbC,QAAAA,IAAI,EAAC0C,OAAO,CAAC1C,IAFA;AAGbkB,QAAAA,IAAI,EAAC,EAHQ;AAIbC,QAAAA,GAAG,EAACuB,OAAO,CAACI,IAJC;AAKb1B,QAAAA,IAAI,EAAC,EALQ;AAMbzB,QAAAA,KAAK,EAAC;AANO,OAAjB;AAQH;;AACDA,IAAAA,KAAK,CAACsB,KAAN,GAAc4B,WAAd;AACH,GAhEa;AAiEdE,EAAAA,QAjEc,oBAiELpD,KAjEK,EAiECqC,QAjED,EAiEU;AACpB,QAAIU,OAAO,GAAG/C,KAAK,CAACsB,KAAN,CAAYe,QAAQ,CAACQ,KAArB,CAAd;AACA,QAAIQ,MAAM,GAAG,KAAb;;AACA,QAAGN,OAAO,CAAC/C,KAAR,IAAiB,KAApB,EAA0B;AACtB,UAAIsD,aAAa,GAAG;AAChBlD,QAAAA,EAAE,EAAE2C,OAAO,CAAC3C,EADI;AAEhBoB,QAAAA,GAAG,EAAEuB,OAAO,CAACvB;AAFG,OAApB;AAIAxB,MAAAA,KAAK,CAAC0B,aAAN,CAAoBc,IAApB,CAAyBc,aAAzB;AACAD,MAAAA,MAAM,GAAG,KAAT;AACH;;AACDN,IAAAA,OAAO,CAAC3C,EAAR,GAAa,EAAb;AACA2C,IAAAA,OAAO,CAAC1C,IAAR,GAAe,EAAf;AACA0C,IAAAA,OAAO,CAACxB,IAAR,GAAec,QAAQ,CAACd,IAAxB;AACAwB,IAAAA,OAAO,CAACvB,GAAR,GAAca,QAAQ,CAACb,GAAvB;AACAuB,IAAAA,OAAO,CAACtB,IAAR,GAAeY,QAAQ,CAACZ,IAAxB;AACAsB,IAAAA,OAAO,CAAC/C,KAAR,GAAgBqD,MAAhB;AACH,GAlFa;AAmFdE,EAAAA,oBAnFc,gCAmFOvD,KAnFP,EAmFawD,UAnFb,EAmFwB;AAClC,QAAIH,MAAM,GAAGG,UAAU,CAACxD,KAAxB;AACA,QAAI6C,KAAK,GAAGW,UAAU,CAACX,KAAvB;;AACA,QAAGQ,MAAM,IAAI,MAAV,IAAoBrD,KAAK,CAACoB,eAAN,CAAsByB,KAAtB,EAA6B7C,KAA7B,IAAsC,MAA7D,EAAoE;AAChE;AACAA,MAAAA,KAAK,CAACoB,eAAN,CAAsByB,KAAtB,EAA6B7C,KAA7B,GAAqC,QAArC;AACH,KAHD,MAGM,IAAGA,KAAK,CAACoB,eAAN,CAAsByB,KAAtB,EAA6B7C,KAA7B,IAAsC,KAAtC,IAA+CA,KAAK,CAACoB,eAAN,CAAsByB,KAAtB,EAA6B7C,KAA7B,IAAsC,QAAxF,EAAiG;AACnGA,MAAAA,KAAK,CAACoB,eAAN,CAAsBqC,MAAtB,CAA6BZ,KAA7B,EAAmC,CAAnC;AACH;AACJ,GA5Fa;AA8Fd;AACA1C,EAAAA,YA/Fc,wBA+FDH,KA/FC,EA+FK0D,aA/FL,EA+FmB;AAC7B1D,IAAAA,KAAK,CAACE,UAAN,CAAiBC,YAAjB,GAAgCuD,aAAhC;AACH,GAjGa;AAkGdC,EAAAA,WAlGc,uBAkGD3D,KAlGC,EAkGM0D,aAlGN,EAkGqB;AAC/B1D,IAAAA,KAAK,CAACE,UAAN,CAAiBG,IAAjB,GAAwBqD,aAAxB;AACH,GApGa;AAqGdE,EAAAA,aArGc,yBAqGC5D,KArGD,EAqGQ0D,aArGR,EAqGuB;AACjC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBI,MAAjB,GAA0BoD,aAA1B;AACH,GAvGa;AAwGdG,EAAAA,eAxGc,2BAwGG7D,KAxGH,EAwGU0D,aAxGV,EAwGyB;AACnC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBK,QAAjB,GAA4BmD,aAA5B;AACH,GA1Ga;AA2GdI,EAAAA,YA3Gc,wBA2GA9D,KA3GA,EA2GO0D,aA3GP,EA2GsB;AAChC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBM,KAAjB,GAAyBkD,aAAzB;AACH,GA7Ga;AA8GdK,EAAAA,YA9Gc,wBA8GA/D,KA9GA,EA8GO0D,aA9GP,EA8GsB;AAChC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBO,KAAjB,GAAyBiD,aAAzB;AACH,GAhHa;AAiHdM,EAAAA,kBAjHc,8BAiHMhE,KAjHN,EAiHa0D,aAjHb,EAiH4B;AACtC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBQ,WAAjB,GAA+BgD,aAA/B;AACH,GAnHa;AAoHdO,EAAAA,WApHc,uBAoHDjE,KApHC,EAoHM0D,aApHN,EAoHqB;AAC/B1D,IAAAA,KAAK,CAACE,UAAN,CAAiBS,IAAjB,GAAwB+C,aAAxB;AACH,GAtHa;AAuHdQ,EAAAA,WAvHc,uBAuHDlE,KAvHC,EAuHM0D,aAvHN,EAuHqB;AAC/B1D,IAAAA,KAAK,CAACE,UAAN,CAAiBU,IAAjB,GAAwB8C,aAAxB;AACH,GAzHa;AA0HdS,EAAAA,YA1Hc,wBA0HAnE,KA1HA,EA0HO0D,aA1HP,EA0HsB;AAChC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBW,KAAjB,GAAyB6C,aAAzB;AACH,GA5Ha;AA6HdU,EAAAA,YA7Hc,wBA6HApE,KA7HA,EA6HO0D,aA7HP,EA6HsB;AAChC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBY,KAAjB,GAAyB4C,aAAzB;AACH,GA/Ha;AAgIdW,EAAAA,gBAhIc,4BAgIIrE,KAhIJ,EAgIW0D,aAhIX,EAgI0B;AACpC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBa,SAAjB,GAA6B2C,aAA7B;AACH,GAlIa;AAmIdY,EAAAA,uBAnIc,mCAmIWtE,KAnIX,EAmIkB0D,aAnIlB,EAmIiC;AAC3C1D,IAAAA,KAAK,CAACE,UAAN,CAAiBc,gBAAjB,GAAoC0C,aAApC;AACH,GArIa;AAsIda,EAAAA,iBAtIc,6BAsIIvE,KAtIJ,EAsIU0D,aAtIV,EAsIwB;AAClC1D,IAAAA,KAAK,CAACE,UAAN,CAAiBe,WAAjB,GAA+ByC,aAA/B;AACH,GAxIa;AAyId;AACA;AACAc,EAAAA,eA3Ic,2BA2IExE,KA3IF,EA2IQ6C,KA3IR,EA2Ic;AACxB,QAAIE,OAAO,GAAG/C,KAAK,CAACsB,KAAN,CAAYuB,KAAZ,CAAd;;AACA,QAAGE,OAAO,CAAC/C,KAAR,IAAiB,KAApB,EAA0B;AACtB,UAAIsD,aAAa,GAAG;AAChBlD,QAAAA,EAAE,EAAE2C,OAAO,CAAC3C,EADI;AAEhBC,QAAAA,IAAI,EAAC0C,OAAO,CAAC1C,IAFG;AAGhBmB,QAAAA,GAAG,EAAEuB,OAAO,CAACvB;AAHG,OAApB;AAKAxB,MAAAA,KAAK,CAAC0B,aAAN,CAAoBc,IAApB,CAAyBc,aAAzB;AACH;;AACGtD,IAAAA,KAAK,CAACsB,KAAN,CAAYmC,MAAZ,CAAmBZ,KAAnB,EAAyB,CAAzB;AACP,GAtJa;AAuJd4B,EAAAA,4BAvJc,wCAuJezE,KAvJf,EAuJqB0E,SAvJrB,EAuJ+B;AACzC1E,IAAAA,KAAK,CAACE,UAAN,CAAiBE,EAAjB,GAAsBsE,SAAtB;AACH,GAzJa;AA0JdC,EAAAA,WA1Jc,uBA0JF3E,KA1JE,EA0JI;AACdA,IAAAA,KAAK,CAACE,UAAN,GAAmB;AACfC,MAAAA,YAAY,EAAC,EADE;AAEfC,MAAAA,EAAE,EAAC,IAFY;AAGfC,MAAAA,IAAI,EAAE,EAHS;AAIfC,MAAAA,MAAM,EAAE,EAJO;AAKfC,MAAAA,QAAQ,EAAC,EALM;AAMfC,MAAAA,KAAK,EAAC,EANS;AAOfC,MAAAA,KAAK,EAAC,EAPS;AAQfC,MAAAA,WAAW,EAAC,IARG;AASfC,MAAAA,IAAI,EAAC,EATU;AAUfC,MAAAA,IAAI,EAAC,EAVU;AAWfC,MAAAA,KAAK,EAAC,EAXS;AAYfC,MAAAA,KAAK,EAAC,EAZS;AAafC,MAAAA,SAAS,EAAC,CAbK;AAcfC,MAAAA,gBAAgB,EAAC,IAdF;AAefC,MAAAA,WAAW,EAAC;AAfG,KAAnB,EAiBAjB,KAAK,CAACkB,UAAN,GAAiB,EAjBjB,EAkBAlB,KAAK,CAACmB,MAAN,GAAa,EAlBb,EAmBAnB,KAAK,CAACoB,eAAN,GAAsB,CAAC;AACnBhB,MAAAA,EAAE,EAAC,EADgB;AAEnBiB,MAAAA,kBAAkB,EAAC,EAFA;AAGnBrB,MAAAA,KAAK,EAAC;AAHa,KAAD,CAnBtB,EAwBAA,KAAK,CAACsB,KAAN,GAAY,CACR;AACAlB,MAAAA,EAAE,EAAC,EADH;AAEAC,MAAAA,IAAI,EAAC,EAFL;AAGAkB,MAAAA,IAAI,EAAC,EAHL;AAIAC,MAAAA,GAAG,EAAC,EAJJ;AAKAC,MAAAA,IAAI,EAAC,EALL;AAMAzB,MAAAA,KAAK,EAAC;AANN,KADQ,EASZA,KAAK,CAAC0B,aAAN,GAAsB,EATV,CAxBZ;AAmCH,GA9La;AA+LdkD,EAAAA,YA/Lc,0BA+LA;AACV5E,IAAAA,KAAK,CAACsB,KAAN,CAAYkB,IAAZ,CAAiB;AACbpC,MAAAA,EAAE,EAAC,EADU;AAEbC,MAAAA,IAAI,EAAC,EAFQ;AAGbkB,MAAAA,IAAI,EAAC,EAHQ;AAIbC,MAAAA,GAAG,EAAC,EAJS;AAKbC,MAAAA,IAAI,EAAC,EALQ;AAMbzB,MAAAA,KAAK,EAAC;AANO,KAAjB;AAQH,GAxMa;AAyMd6E,EAAAA,SAzMc,qBAyMJ7E,KAzMI,EAyME6C,KAzMF,EAyMQ;AAClB,QAAIE,OAAO,GAAG/C,KAAK,CAACsB,KAAN,CAAYuB,KAAZ,CAAd;;AACA,QAAGE,OAAO,CAAC/C,KAAR,IAAiB,KAApB,EAA0B;AACtB,UAAIsD,aAAa,GAAG;AAChBlD,QAAAA,EAAE,EAAE2C,OAAO,CAAC3C,EADI;AAEhBC,QAAAA,IAAI,EAAC0C,OAAO,CAAC1C,IAFG;AAGhBmB,QAAAA,GAAG,EAAEuB,OAAO,CAACvB;AAHG,OAApB;AAKAxB,MAAAA,KAAK,CAAC0B,aAAN,CAAoBc,IAApB,CAAyBc,aAAzB;AACH;;AACDP,IAAAA,OAAO,CAAC3C,EAAR,GAAa,EAAb;AACA2C,IAAAA,OAAO,CAACvB,GAAR,GAAc,EAAd;AACAuB,IAAAA,OAAO,CAAC/C,KAAR,GAAgB,KAAhB;AACA+C,IAAAA,OAAO,CAACtB,IAAR,GAAe,EAAf;AACH,GAvNa;AAwNdqD,EAAAA,mBAxNc,+BAwNM9E,KAxNN,EAwNY+E,OAxNZ,EAwNoB;AAC9B,QAAIC,YAAY,GAAGhF,KAAK,CAACsB,KAAN,CAAY2D,MAAZ,CAAoB,UAAA1D,IAAI;AAAA,aAAIA,IAAI,CAACvB,KAAL,KAAe,KAAnB;AAAA,KAAxB,CAAnB;AACA,QAAI+C,OAAO,GAAGiC,YAAY,CAACD,OAAO,CAAClC,KAAT,CAA1B;AACAE,IAAAA,OAAO,CAACvB,GAAR,GAAcuD,OAAO,CAACG,WAAtB;AACAnC,IAAAA,OAAO,CAAC1C,IAAR,GAAe0E,OAAO,CAAC1E,IAAvB;AACH,GA7Na;AA8Nd8E,EAAAA,6BA9Nc,yCA8NgBnF,KA9NhB,EA8NsBwD,UA9NtB,EA8NiC;AAC3CxD,IAAAA,KAAK,CAACoB,eAAN,CAAsBoC,UAAU,CAACX,KAAjC,EAAwCzC,EAAxC,GAA6CoD,UAAU,CAACpD,EAAxD;AACH,GAhOa;AAiOdgF,EAAAA,0BAjOc,sCAiOapF,KAjOb,EAiOoB+E,OAjOpB,EAiO4B;AACtC,QAAIhC,OAAO,GAAE/C,KAAK,CAACsB,KAAN,CAAYyD,OAAO,CAAClC,KAApB,CAAb;AACAE,IAAAA,OAAO,CAAC3C,EAAR,GAAa2E,OAAO,CAAC3E,EAArB;AACA2C,IAAAA,OAAO,CAAC1C,IAAR,GAAe0E,OAAO,CAAC1E,IAAvB;AACH,GArOa;AAsOdgF,EAAAA,8BAtOc,0CAsOiBrF,KAtOjB,EAsOuB;AACjCA,IAAAA,KAAK,CAAC0B,aAAN,GAAsB,EAAtB;AACH;AAxOa,CAAlB;AA2OA,IAAM4D,OAAO,GAAG;AACZlD,EAAAA,cADY,0BACGmD,OADH,EACW;AACnB,SAAKC,MAAL,CAAYC,GAAZ,CAAgB7F,WAAhB,EACC8F,IADD,CACM,UAAArD,QAAQ,EAAE;AACZkD,MAAAA,OAAO,CAACI,MAAR,CAAe,gBAAf,EAAgCtD,QAAQ,CAACuD,IAAT,CAAcC,YAA9C;AACH,KAHD;AAIH,GANW;AAOZvD,EAAAA,UAPY,sBAODiD,OAPC,EAOO;AACf,SAAKC,MAAL,CAAYC,GAAZ,CAAgB5F,gBAAhB,EACC6F,IADD,CACM,UAAArD,QAAQ,EAAE;AACZkD,MAAAA,OAAO,CAACI,MAAR,CAAe,YAAf,EAA4BtD,QAAQ,CAACuD,IAArC;AACP,KAHG;AAIH,GAZW;AAaZnD,EAAAA,YAbY,wBAaC8C,OAbD,EAaS;AAAA;;AACjB,WAAO,aAAY,UAACO,OAAD,EAAUC,MAAV,EAAqB;AACpC,MAAA,KAAI,CAACP,MAAL,CAAYC,GAAZ,CAAgBhG,UAAhB,EACCiG,IADD,CACM,UAAArD,QAAQ,EAAE;AACZyD,QAAAA,OAAO,CAACzD,QAAQ,CAACuD,IAAT,CAAcI,aAAf,CAAP;AACAT,QAAAA,OAAO,CAACI,MAAR,CAAe,cAAf,EAA8BtD,QAAQ,CAACuD,IAAT,CAAcK,eAA5C;AACH,OAJD,EAKCC,KALD,CAKO,UAAAC,KAAK,EAAI;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAJ,QAAAA,MAAM,CAACI,KAAD,CAAN;AACD,OARD;AASH,KAVM,CAAP;AAWH,GAzBW;AA0BZzD,EAAAA,eA1BY,2BA0BI6C,OA1BJ,EA0BYe,MA1BZ,EA0BmB;AAAA;;AAC3B,WAAO,aAAY,UAACR,OAAD,EAAUC,MAAV,EAAqB;AACxC;AACI,UAAIQ,IAAI,GAAGD,MAAM,CAACC,IAAlB;AACA,UAAInG,EAAE,GAAIkG,MAAM,CAAClG,EAAjB;;AACA,MAAA,MAAI,CAACoF,MAAL,CAAYC,GAAZ,CAAgBhG,UAAU,GAAC,GAAX,GAAeW,EAA/B,EACCsF,IADD,CACM,UAAArD,QAAQ,EAAE;AACZyD,QAAAA,OAAO,CAACzD,QAAQ,CAACuD,IAAT,CAAcI,aAAf,CAAP;AACAT,QAAAA,OAAO,CAACI,MAAR,CAAe,iBAAf,EAAiCtD,QAAQ,CAACuD,IAAT,CAAcY,WAA/C;AACH,OAJD,EAKCN,KALD,CAKO,UAAAC,KAAK,EAAE;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OAPD;AAQH,KAZM,CAAP;AAaH,GAxCW;AAyCZxD,EAAAA,6BAzCY,yCAyCkB4C,OAzClB,EAyC2Be,MAzC3B,EAyCkC;AAC1C,QAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;AACA,QAAInG,EAAE,GAAIkG,MAAM,CAAClG,EAAjB;AACA,SAAKoF,MAAL,CAAYC,GAAZ,CAAgB/F,iBAAiB,GAAC,GAAlB,GAAsBU,EAAtC,EACCsF,IADD,CACM,UAAArD,QAAQ,EAAE;AACZkD,MAAAA,OAAO,CAACI,MAAR,CAAe,+BAAf,EAA+CtD,QAAQ,CAACuD,IAAxD;AACH,KAHD,EAICM,KAJD,CAIO,UAAAC,KAAK,EAAE;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAND;AAOH,GAnDW;AAoDZlD,EAAAA,mBApDY,+BAoDQsC,OApDR,EAoDiBe,MApDjB,EAoDwB;AAChC,QAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;AACA,QAAInG,EAAE,GAAIkG,MAAM,CAAClG,EAAjB;AACA,SAAKoF,MAAL,CAAYC,GAAZ,CAAgB9F,OAAO,GAAC,GAAR,GAAYS,EAA5B,EACCsF,IADD,CACM,UAAArD,QAAQ,EAAE;AACZkD,MAAAA,OAAO,CAACI,MAAR,CAAe,qBAAf,EAAqCtD,QAAQ,CAACuD,IAA9C;AACH,KAHD,EAICM,KAJD,CAIO,UAAAC,KAAK,EAAE;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAND;AAOH,GA9DW;AA+DZM,EAAAA,OA/DY,mBA+DJlB,OA/DI,EA+DIR,OA/DJ,EA+DY;AACpBQ,IAAAA,OAAO,CAACI,MAAR,CAAe,SAAf,EAAyBZ,OAAzB;AACH,GAjEW;AAkEZxB,EAAAA,oBAlEY,gCAkESgC,OAlET,EAkEiBmB,iBAlEjB,EAkEmC;AACvCnB,IAAAA,OAAO,CAACI,MAAR,CAAe,sBAAf,EAAsCe,iBAAtC;AACP,GApEW;AAsEZlC,EAAAA,eAtEY,2BAsEIe,OAtEJ,EAsEYoB,MAtEZ,EAsEmB;AAC3BpB,IAAAA,OAAO,CAACI,MAAR,CAAe,iBAAf,EAAiCgB,MAAjC;AACH,GAxEW;AAyEZ/B,EAAAA,YAzEY,wBAyECW,OAzED,EAyES;AACjBA,IAAAA,OAAO,CAACI,MAAR,CAAe,cAAf;AACH,GA3EW;AA4EZd,EAAAA,SA5EY,qBA4EFU,OA5EE,EA4EM1C,KA5EN,EA4EY;AACpB0C,IAAAA,OAAO,CAACI,MAAR,CAAe,WAAf,EAA2B9C,KAA3B;AACH,GA9EW;AA+EZ;AACM4B,EAAAA,4BAhFM;AAAA;AAAA;AAAA,6CAgFuBc,OAhFvB,EAgF+Be,MAhF/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAiFJC,cAAAA,IAjFI,GAiFGD,MAAM,CAACC,IAjFV;AAkFJK,cAAAA,MAlFI,GAkFKN,MAAM,CAACM,MAlFZ;AAmFJxG,cAAAA,EAnFI,GAmFEkG,MAAM,CAAC5B,SAnFT;AAoFJlD,cAAAA,GApFI,GAoFE/B,UApFF;;AAqFR,kBAAImH,MAAM,IAAI,KAAd,EAAoB;AAChBpF,gBAAAA,GAAG,GAAG/B,UAAU,GAAG,GAAb,GAAiBW,EAAvB;AACH,eAvFO,CAwFR;AACA;;;AAzFQ;AA2FEwF,cAAAA,IA3FF,GA2FS5F,KAAK,CAACE,UA3Ff;AAAA;AAAA,qBA4FiB,KAAKsF,MAAL,CAAYqB,IAAZ,CAAiBrF,GAAjB,EAAsB;AACvCnB,gBAAAA,IAAI,EAAcuF,IAAI,CAACvF,IADgB;AAEvCC,gBAAAA,MAAM,EAAYsF,IAAI,CAACtF,MAFgB;AAGvCC,gBAAAA,QAAQ,EAAUqF,IAAI,CAACrF,QAHgB;AAIvCC,gBAAAA,KAAK,EAAaoF,IAAI,CAACpF,KAJgB;AAKvCC,gBAAAA,KAAK,EAAamF,IAAI,CAACnF,KALgB;AAMvCC,gBAAAA,WAAW,EAAOkF,IAAI,CAAClF,WANgB;AAOvCC,gBAAAA,IAAI,EAAciF,IAAI,CAACjF,IAPgB;AAQvCC,gBAAAA,IAAI,EAAcgF,IAAI,CAAChF,IARgB;AASvCC,gBAAAA,KAAK,EAAa+E,IAAI,CAAC/E,KATgB;AAUvCC,gBAAAA,KAAK,EAAa8E,IAAI,CAAC9E,KAVgB;AAWvCC,gBAAAA,SAAS,EAAS,CAXqB;AAYvCE,gBAAAA,WAAW,EAAO2E,IAAI,CAAC3E,WAZgB;AAavCD,gBAAAA,gBAAgB,EAAE4E,IAAI,CAAC5E;AAbgB,eAAtB,CA5FjB;;AAAA;AA4FAqB,cAAAA,QA5FA;;AA2GJ,kBAAGA,QAAQ,CAACuD,IAAT,CAAckB,MAAjB,EAAwB;AACpBV,gBAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA4ChE,QAAQ,CAACuD,IAAT,CAAckB,MAA1D;AACH;;AACD,kBAAGzE,QAAQ,CAACuD,IAAT,CAAcmB,MAAjB,EAAwB;AACpBX,gBAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA6ChE,QAAQ,CAACuD,IAAT,CAAcmB,MAA3D;AACH;;AACDxB,cAAAA,OAAO,CAACI,MAAR,CAAe,8BAAf,EAA+CtD,QAAQ,CAACuD,IAAT,CAAcoB,UAA7D;AAjHI;AAAA;;AAAA;AAAA;AAAA;AAoHJZ,cAAAA,OAAO,CAACC,GAAR;;AApHI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAuHN;AAENY,EAAAA,mBAzHY,+BAyHQ1B,OAzHR,EAyHgB2B,aAzHhB,EAyH8B;AACtC,WAAO,aAAY,UAACpB,OAAD,EAAUC,MAAV,EAAqB;AAAA,iCAC3BlD,KAD2B;AAEhC,YAAME,OAAO,GAAGmE,aAAa,CAACrE,KAAD,CAA7B;AACA,YAAMpB,IAAI,GAAGsB,OAAO,CAACtB,IAArB,CAHgC,CAIhC;AACA;AACA;;AAEAnC,QAAAA,QAAQ,CAACiH,IAAT,GAAgBY,0BAAhB,CAA2CnH,KAAK,CAAC4B,YAAjD,EAA8D5B,KAAK,CAAC6B,YAApE,EACC6D,IADD,CACM,UAAA0B,IAAI,EAAI;AACd,cAAIC,UAAU,GAAI/H,QAAQ,CAACgI,OAAT,GAAmBC,GAAnB,EAAlB;AACI,cAAIC,QAAQ,GAAG;AACfC,YAAAA,WAAW,EAAE1E,OAAO,CAACxB,IAAR,CAAa,CAAb,EAAgBmG;AADd,WAAf;AAGA,cAAMC,QAAQ,GAAG5E,OAAO,CAACxB,IAAR,CAAa,CAAb,EAAgBlB,IAAjC;AACA,cAAMuH,GAAG,GAAGD,QAAQ,CAACE,KAAT,CAAeF,QAAQ,CAACG,WAAT,CAAqB,GAArB,CAAf,CAAZ;AACA,cAAIC,UAAU,GAAGV,UAAU,CAACW,KAAX,CAAiB,cAAcvG,IAAd,GAAqBmG,GAAtC,EAA2CK,GAA3C,CAA+ClF,OAAO,CAACxB,IAAR,CAAa,CAAb,CAA/C,EAAgEiG,QAAhE,CAAjB;AAEAO,UAAAA,UAAU,CAACG,EAAX,CAAc5I,QAAQ,CAACgI,OAAT,CAAiBa,SAAjB,CAA2BC,aAAzC,EACA,UAASC,QAAT,EAAmB;AACf,gBAAIC,QAAQ,GAAKD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAApE;AACApC,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAIxD,KAAJ,GAAU,GAAV,GAAc,YAAd,GAA6ByF,QAA7B,GAAwC,QAApD;;AACA,oBAAQD,QAAQ,CAACrI,KAAjB;AACA,mBAAKV,QAAQ,CAACgI,OAAT,CAAiBmB,SAAjB,CAA2BC,MAAhC;AACItC,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA;;AACJ,mBAAK/G,QAAQ,CAACgI,OAAT,CAAiBmB,SAAjB,CAA2BE,OAAhC;AACIvC,gBAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA;AANJ;AAQH,WAZD,EAYG,UAASF,KAAT,EAAgB;AACnB,oBAAQA,KAAK,CAACyC,IAAd;AACI,mBAAK,sBAAL;AACA;AACA;;AAEA,mBAAK,kBAAL;AACA;AACA;;AAEA,mBAAK,iBAAL;AACA;AACA;AAXJ;AAaC,WA1BD,EA0BG,SAASC,QAAT,GAAqB;AACxB;AACId,YAAAA,UAAU,CAACM,QAAX,CAAoBd,GAApB,CAAwBuB,cAAxB,GAAyCpD,IAAzC,CAA8C,UAASqD,WAAT,EAAsB;AAChE,kBAAIC,UAAU,GAAC;AACXnG,gBAAAA,KAAK,EAAEA,KADI;AAEXxC,gBAAAA,IAAI,EAAEoB,IAAI,GAAGmG,GAFF;AAGX1C,gBAAAA,WAAW,EAAC6D,WAHD,CAKf;;AALe,eAAf;AAOAxD,cAAAA,OAAO,CAACI,MAAR,CAAe,qBAAf,EAAqCqD,UAArC;AACA5C,cAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC0C,WAAjC;;AACI,kBAAG7B,aAAa,CAACpE,MAAd,IAAwBD,KAAK,GAAC,CAAjC,EAAmC;AAC/BuD,gBAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAP,gBAAAA,OAAO,CAAC,IAAD,CAAP;AACH;AACR,aAdD;AAeH,WA3CD;AA4CH,SAtDD;AARgC;;AACpC,WAAK,IAAIjD,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGqE,aAAa,CAACpE,MAA1C,EAAkDD,KAAK,EAAvD,EAA2D;AAAA,cAAlDA,KAAkD;AA8D1D;AACJ,KAhEM,CAAP;AAiEH,GA3LW;AA6LZiC,EAAAA,mBA7LY,+BA6LQS,OA7LR,EA6LgB;AACxB,WAAO,aAAY,UAACO,OAAD,EAAUC,MAAV,EAAqB;AACpC,UAAIkD,SAAS,GAAGjJ,KAAK,CAACsB,KAAN,CAAYwB,MAA5B;AACA,UAAIkC,YAAY,GAAGhF,KAAK,CAACsB,KAAN,CAAY2D,MAAZ,CAAoB,UAAA1D,IAAI;AAAA,eAAIA,IAAI,CAACvB,KAAL,KAAe,KAAnB;AAAA,OAAxB,CAAnB;;AACA,UAAGgF,YAAY,CAAClC,MAAb,GAAoB,CAAvB,EAAyB;AACrByC,QAAAA,OAAO,CAAC2D,QAAR,CAAiB,qBAAjB,EAAuClE,YAAvC,EAAqDU,IAArD,CAA0D,UAACrD,QAAD,EAAc;AACpE,cAAGA,QAAH,EAAY;AACRyD,YAAAA,OAAO,CAAC,IAAD,CAAP;AACAM,YAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACH;AACJ,SALD;AAMH,OAPD,MAOK;AACDP,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAM,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACH;AACJ,KAdM,CAAP,CADwB,CAiBxB;AACA;AACI;AACA;AACA;AACI;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACJ;AACP,GAlOW;AAmOZlB,EAAAA,6BAnOY,yCAmOkBI,OAnOlB,EAmO0Be,MAnO1B,EAmOiC;AAAA;;AACzC,QAAG;AACH,UAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;AACA,UAAInG,EAAE,GAAIkG,MAAM,CAAC5B,SAAjB;AACA,UAAIlD,GAAG,GAAG,EAAV;;AAHG,mCAIUqB,KAJV;AAKK,YAAME,OAAO,GAAG/C,KAAK,CAACoB,eAAN,CAAsByB,KAAtB,CAAhB;;AACA,YAAGE,OAAO,CAAC/C,KAAR,IAAgB,MAAhB,IAAwB+C,OAAO,CAAC/C,KAAR,IAAe,KAA1C,EAAgD;AAC5C,cAAG+C,OAAO,CAAC/C,KAAR,IAAiB,MAApB,EAA2B;AACvBwB,YAAAA,GAAG,GAAG9B,iBAAiB,GAAC,GAAlB,GAAsBqD,OAAO,CAAC3C,EAApC;AACH,WAFD,MAEM,IAAG2C,OAAO,CAAC/C,KAAR,IAAgB,KAAnB,EAAyB;AAC3BwB,YAAAA,GAAG,GAAG9B,iBAAN;AACH;;AACD,UAAA,MAAI,CAAC8F,MAAL,CAAYqB,IAAZ,CAAiBrF,GAAjB,EAAsB;AAClBwF,YAAAA,UAAU,EAAchH,KAAK,CAACE,UAAN,CAAiBE,EADvB;AAElB4C,YAAAA,cAAc,EAAUD,OAAO,CAAC1B;AAFd,WAAtB,EAGGqE,IAHH,CAGQ,UAAArD,QAAQ,EAAE;AACd,gBAAImB,UAAU,GAAC;AACXpD,cAAAA,EAAE,EAACiC,QAAQ,CAACuD,IAAT,CAAcxF,EADN;AAEXyC,cAAAA,KAAK,EAAGA;AAFG,aAAf;AAIA0C,YAAAA,OAAO,CAACI,MAAR,CAAe,+BAAf,EAA+CnC,UAA/C,EALc,CAMd;AACH,WAVD;AAWH,SAjBD,MAiBM;AACFhC,UAAAA,GAAG,GAAG9B,iBAAiB,GAAC,GAAlB,GAAsBqD,OAAO,CAAC3C,EAApC;;AACA,UAAA,MAAI,CAACoF,MAAL,CAAY2D,MAAZ,CAAmB3H,GAAnB,EAAwBkE,IAAxB,CAA6B,UAAArD,QAAQ,EAAE;AACnC+D,YAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwChE,QAAxC;AACA,gBAAI+G,GAAG,GAAG;AACNvG,cAAAA,KAAK,EAAGA,KADF;AAEN7C,cAAAA,KAAK,EAAE,QAFD,CAIV;;AAJU,aAAV;AAKAoG,YAAAA,OAAO,CAACC,GAAR,CAAY,oBAAkBhE,QAAQ,CAACuD,IAAT,CAAc8B,IAAhC,GAAqC,YAAjD,EAA+DrF,QAAQ,CAACuD,IAAxE;AACH,WARD;AASH;AAlCN;;AAIC,WAAK,IAAI/C,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG7C,KAAK,CAACoB,eAAN,CAAsB0B,MAAlD,EAA0DD,KAAK,EAA/D,EAAmE;AAAA,eAA1DA,KAA0D;AA+BlE;AACJ,KApCD,CAoCC,OAAMwG,EAAN,EAAS;AACNjD,MAAAA,OAAO,CAACC,GAAR,CAAYgD,EAAZ;AACH;AACJ,GA3QW;AA4QZjE,EAAAA,0BA5QY,sCA4QeG,OA5Qf,EA4QuBe,MA5QvB,EA4Q8B;AAAA;;AACtC,QAAG;AACC,UAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;AACA,UAAI/E,GAAG,GAAG7B,OAAV;;AAFD,mCAGUkD,KAHV;AAIK,YAAME,OAAO,GAAG/C,KAAK,CAACsB,KAAN,CAAYuB,KAAZ,CAAhB;;AACA,YAAGE,OAAO,CAAC/C,KAAR,IAAiB,QAAjB,IAA6B+C,OAAO,CAAC/C,KAAR,IAAiB,KAAjD,EAAuD;AACnD,cAAG+C,OAAO,CAAC/C,KAAR,IAAiB,QAApB,EAA6B;AACzBwB,YAAAA,GAAG,GAAGA,GAAG,GAAC,GAAJ,GAAQuB,OAAO,CAAC3C,EAAtB;AACH;;AACD,UAAA,MAAI,CAACoF,MAAL,CAAYqB,IAAZ,CAAiBrF,GAAjB,EAAsB;AAClBwF,YAAAA,UAAU,EAAMhH,KAAK,CAACE,UAAN,CAAiBE,EADf;AAElBC,YAAAA,IAAI,EAAY0C,OAAO,CAAC1C,IAFN;AAGlB8C,YAAAA,IAAI,EAAYJ,OAAO,CAACvB;AAHN,WAAtB,EAIGkE,IAJH,CAIQ,UAAArD,QAAQ,EAAE;AACd,gBAAImB,UAAU,GAAC;AACXpD,cAAAA,EAAE,EAACiC,QAAQ,CAACjC,EADD;AAEXC,cAAAA,IAAI,EAACgC,QAAQ,CAAChC,IAFH;AAGXwC,cAAAA,KAAK,EAAGA;AAHG,aAAf;AAKA0C,YAAAA,OAAO,CAACI,MAAR,CAAe,4BAAf,EAA4CnC,UAA5C;AACA4C,YAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA6ChE,QAAQ,CAACuD,IAAT,CAAc0D,KAA3D;AACH,WAZD;AAaH;AAtBN;;AAGC,WAAK,IAAIzG,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG7C,KAAK,CAACsB,KAAN,CAAYwB,MAAxC,EAAgDD,KAAK,EAArD,EAAyD;AAAA,eAAhDA,KAAgD;AAoBxD;AACJ,KAxBD,CAwBC,OAAMwG,EAAN,EAAS;AACNjD,MAAAA,OAAO,CAACC,GAAR,CAAYgD,EAAZ;AACH;AACJ,GAxSW;AAySZhE,EAAAA,8BAzSY,0CAySmBE,OAzSnB,EAyS4Be,MAzS5B,EAySmC;AAAA;;AAC3C,QAAIC,IAAI,GAAGD,MAAM,CAACC,IAAlB;;AACA,QAAGvG,KAAK,CAAC0B,aAAN,CAAoBoB,MAApB,GAA6B,CAAhC,EAAkC;AAC9BxD,MAAAA,QAAQ,CAACiH,IAAT,GAAgBY,0BAAhB,CAA2CnH,KAAK,CAAC4B,YAAjD,EAA8D5B,KAAK,CAAC6B,YAApE,EACC6D,IADD,CACM,UAAA0B,IAAI,EAAI;AACd,aAAK,IAAIvE,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG7C,KAAK,CAAC0B,aAAN,CAAoBoB,MAAhD,EAAwDD,KAAK,EAA7D,EAAiE;AAC7D,cAAME,OAAO,GAAG/C,KAAK,CAAC0B,aAAN,CAAoBmB,KAApB,CAAhB;AACI,cAAIyE,OAAO,GAAGhI,QAAQ,CAACgI,OAAT,EAAd;AACA,cAAID,UAAU,GAAGC,OAAO,CAACC,GAAR,EAAjB;AACA,cAAIgC,SAAS,GAAGlC,UAAU,CAACW,KAAX,CAAiB,eAAajF,OAAO,CAAC1C,IAAtC,CAAhB;AACAkJ,UAAAA,SAAS,CAACJ,MAAV,GAAmBzD,IAAnB,CAAwB,YAAW;AAC/BU,YAAAA,OAAO,CAACC,GAAR,CAAY,gDAAZ;AACH,WAFD,EAEGH,KAFH,CAES,UAASC,KAAT,EAAgB,CACzB;AACC,WAJD;;AAKA,UAAA,MAAI,CAACX,MAAL,CAAY2D,MAAZ,CAAmBxJ,OAAO,GAAC,GAAR,GAAYoD,OAAO,CAAC3C,EAAvC,EAA2CsF,IAA3C,CAAgD,UAAArD,QAAQ,EAAG;AACvD+D,YAAAA,OAAO,CAACC,GAAR,CAAY,oDAAZ;AACH,WAFD;AAGP;;AACDd,QAAAA,OAAO,CAACI,MAAR,CAAe,gCAAf;AACC,OAjBD;AAkBH;AACJ,GA/TW;AAgUZvC,EAAAA,QAhUY,oBAgUHmC,OAhUG,EAgUKe,MAhUL,EAgUY;AACpBf,IAAAA,OAAO,CAACI,MAAR,CAAe,UAAf,EAA0BW,MAA1B;AACH,GAlUW;AAmUZ3B,EAAAA,WAnUY,uBAmUAY,OAnUA,EAmUQ;AAChBA,IAAAA,OAAO,CAACI,MAAR,CAAe,aAAf;AACH,GArUW;AAuUZpD,EAAAA,iBAvUY,6BAuUMgD,OAvUN,EAuUc;AACtBA,IAAAA,OAAO,CAACI,MAAR,CAAe,mBAAf;AACH;AAzUW,CAAhB;AA6UA,eAAc;AACV5F,EAAAA,MAAM,EAANA,MADU;AACFC,EAAAA,KAAK,EAALA,KADE;AACK8B,EAAAA,OAAO,EAAPA,OADL;AACcK,EAAAA,SAAS,EAATA,SADd;AACyBmD,EAAAA,OAAO,EAAPA;AADzB,CAAd","sourcesContent":["import * as firebase from 'firebase'\r\nimport { getField, updateField } from 'vuex-map-fields';\r\nimport {productUrl,characteristicUrl,fileUrl,categoryUrl,statusProductUrl} from '../../../packages/config'\r\nimport { async } from 'q';\r\n\r\nconst strict = true\r\nconst state = {\r\n    products:[],\r\n    productObj:{\r\n        generateUuid:'',\r\n        id:null,\r\n        name: '',\r\n        modelo: '',\r\n        quantity:'',\r\n        brand:'',\r\n        price:'',\r\n        category_id:null,\r\n        // category_id:undefined,\r\n        peso:'',\r\n        alto:'',\r\n        ancho:'',\r\n        fondo:'',\r\n        parent_id:0,\r\n        // statusProduct_id:null,\r\n        statusProduct_id:null,\r\n        description:''\r\n        // uniqueCode:'',\r\n    },\r\n    categories:[],\r\n    status:[],\r\n    characteristics:[\r\n        {\r\n            id:'',\r\n            characteristicName:'',\r\n            state:'new'\r\n        },\r\n    ],\r\n    files:[\r\n        {\r\n            id:'',\r\n            name:'',\r\n            file:'',\r\n            url:'',\r\n            uuid:'',\r\n            state:'new'\r\n        }\r\n    ],\r\n    fileForDelete : [],\r\n    maxUploadImage:4,\r\n    userFirebase:'kevi3195@gmail.com',\r\n    passFirebase:'secret!123'\r\n}\r\n\r\nconst getters={\r\n    getField,\r\n    fileGetter: (state) => {\r\n        return state.files\r\n    },\r\n    ProductGetter:(state)  =>{\r\n        return state.products\r\n    },\r\n    categoriesGetter:(state)=>{\r\n        return state.categories\r\n    },\r\n    statusGetter:(state)=>{\r\n        return state.status\r\n    }\r\n}\r\n\r\nconst mutations = {\r\n    updateField,\r\n    fillcategories(state,response){\r\n        state.categories = response\r\n    },\r\n    fillStatus(state,response){\r\n        state.status = response\r\n    },\r\n    addCharacteristic(state){\r\n        state.characteristics.push({\r\n            id:'',\r\n            characteristicName:'',\r\n            state:'new'\r\n        })\r\n    },\r\n    fillProducts(state,response){\r\n        state.products = response\r\n    },\r\n    fillProductById(state,response){\r\n        state.productObj = {\r\n            generateUuid:'',\r\n            id : response.id,\r\n            name : response.name,\r\n            modelo : response.modelo,\r\n            brand : response.brand,\r\n            category_id : response.category_id,\r\n            quantity : response.quantity,\r\n            price : response.price,\r\n            peso : response.peso,\r\n            alto : response.alto,\r\n            ancho : response.ancho,\r\n            fondo : response.fondo,\r\n            statusProduct_id : response.statusProduct_id,\r\n            description : response.description,\r\n            parent_id:0,\r\n            description:response.description\r\n        }\r\n    },\r\n    fillCharacteristicByProductId(state,response){\r\n        let arrayOfCharacteristic = []\r\n        for (let index = 0; index < response.length; index++) {\r\n            const element = response[index]\r\n            arrayOfCharacteristic.push({\r\n                id:element.id,\r\n                characteristicName : element.characteristic,\r\n                state:'edit'\r\n            }) \r\n        }\r\n        state.characteristics = arrayOfCharacteristic\r\n    },\r\n    fillFileByProductId(state,response){\r\n        let arrayOfFile = []\r\n        for (let index = 0; index < response.length; index++) {\r\n            const element = response[index];\r\n            arrayOfFile.push({\r\n                id:element.id,\r\n                name:element.name,\r\n                file:'',\r\n                url:element.path,\r\n                uuid:'',\r\n                state:'old'\r\n            })\r\n        }\r\n        state.files = arrayOfFile\r\n    },\r\n    putImage(state,response){\r\n        var element = state.files[response.index]\r\n        var estado = 'new'\r\n        if(element.state == 'old'){\r\n            let objfileDelete = {\r\n                id: element.id,\r\n                url: element.url \r\n            }\r\n            state.fileForDelete.push(objfileDelete)\r\n            estado = 'new'\r\n        }\r\n        element.id = ''\r\n        element.name = ''\r\n        element.file = response.file\r\n        element.url = response.url\r\n        element.uuid = response.uuid\r\n        element.state = estado\r\n    },\r\n    deleteCharacteristic(state,objCharact){\r\n        var estado = objCharact.state\r\n        var index = objCharact.index\r\n        if(estado == 'edit' && state.characteristics[index].state == 'edit'){\r\n            // console.log(index)\r\n            state.characteristics[index].state = 'delete'\r\n        }else if(state.characteristics[index].state == 'new' || state.characteristics[index].state == 'delete'){\r\n            state.characteristics.splice(index,1);\r\n        }\r\n    },\r\n\r\n    //------------llenado de producto------------\r\n    generateUuid(state,AddProductObj){\r\n        state.productObj.generateUuid = AddProductObj\r\n    },\r\n    NameProduct (state, AddProductObj) {\r\n        state.productObj.name = AddProductObj\r\n    },\r\n    modeloProduct (state, AddProductObj) {\r\n        state.productObj.modelo = AddProductObj\r\n    },\r\n    quantityProduct (state, AddProductObj) {\r\n        state.productObj.quantity = AddProductObj\r\n    },\r\n    brandProduct (state, AddProductObj) {\r\n        state.productObj.brand = AddProductObj\r\n    },\r\n    priceProduct (state, AddProductObj) {\r\n        state.productObj.price = AddProductObj\r\n    },\r\n    category_idProduct (state, AddProductObj) {\r\n        state.productObj.category_id = AddProductObj\r\n    },\r\n    pesoProduct (state, AddProductObj) {\r\n        state.productObj.peso = AddProductObj\r\n    },\r\n    altoProduct (state, AddProductObj) {\r\n        state.productObj.alto = AddProductObj\r\n    },\r\n    anchoProduct (state, AddProductObj) {\r\n        state.productObj.ancho = AddProductObj\r\n    },\r\n    fondoProduct (state, AddProductObj) {\r\n        state.productObj.fondo = AddProductObj\r\n    },\r\n    parent_idProduct (state, AddProductObj) {\r\n        state.productObj.parent_id = AddProductObj\r\n    },\r\n    statusProduct_idProduct (state, AddProductObj) {\r\n        state.productObj.statusProduct_id = AddProductObj\r\n    },\r\n    updateDescription(state,AddProductObj){\r\n        state.productObj.description = AddProductObj\r\n    },\r\n    //---------------------------------------------------\r\n    //---------------adicionando imagen------------------\r\n    deleteFileImage(state,index){\r\n        var element = state.files[index]\r\n        if(element.state == 'old'){\r\n            let objfileDelete = {\r\n                id: element.id,\r\n                name:element.name,\r\n                url: element.url \r\n            }\r\n            state.fileForDelete.push(objfileDelete)\r\n        }\r\n            state.files.splice(index,1)\r\n    },\r\n    CreateAndUpdateProductSubmit(state,productId){\r\n        state.productObj.id = productId\r\n    },\r\n    clearFields(state){\r\n        state.productObj = {\r\n            generateUuid:'',\r\n            id:null,\r\n            name: '',\r\n            modelo: '',\r\n            quantity:'',\r\n            brand:'',\r\n            price:'',\r\n            category_id:null,\r\n            peso:'',\r\n            alto:'',\r\n            ancho:'',\r\n            fondo:'',\r\n            parent_id:0,\r\n            statusProduct_id:null,\r\n            description:''\r\n        },    \r\n        state.categories=[],\r\n        state.status=[],\r\n        state.characteristics=[{\r\n            id:'',\r\n            characteristicName:'',\r\n            state:'new'\r\n        }],\r\n        state.files=[\r\n            {\r\n            id:'',\r\n            name:'',\r\n            file:'',\r\n            url:'',\r\n            uuid:'',\r\n            state:'new'\r\n        },\r\n        state.fileForDelete = []\r\n    ]\r\n    },\r\n    addFileImage(){\r\n        state.files.push({\r\n            id:'',\r\n            name:'',\r\n            file:'',\r\n            url:'',\r\n            uuid:'',\r\n            state:'new'\r\n        })\r\n    },\r\n    emptyFile(state,index){\r\n        var element = state.files[index]\r\n        if(element.state == 'old'){\r\n            let objfileDelete = {\r\n                id: element.id,\r\n                name:element.name,\r\n                url: element.url \r\n            }\r\n            state.fileForDelete.push(objfileDelete)\r\n        }\r\n        element.id = ''\r\n        element.url = ''\r\n        element.state = 'new'\r\n        element.uuid = ''\r\n    },\r\n    addingImageFirebase(state,objFile){\r\n        var resultadoNew = state.files.filter( file => file.state === 'new' );\r\n        var element = resultadoNew[objFile.index]\r\n        element.url = objFile.urlFirebase\r\n        element.name = objFile.name\r\n    },\r\n    CreateAndUpdateCharacteristic(state,objCharact){\r\n        state.characteristics[objCharact.index].id = objCharact.id\r\n    },\r\n    createAndUpdateFileProduct(state, objFile){\r\n        var element =state.files[objFile.index]\r\n        element.id = objFile.id\r\n        element.name = objFile.name\r\n    },\r\n    deleteImageFirebaseAndDataBase(state){\r\n        state.fileForDelete = []\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    fillcategories(context){\r\n        this.$myApi.get(categoryUrl)\r\n        .then(response=>{\r\n            context.commit('fillcategories',response.data.CategoryTree)\r\n        })\r\n    },\r\n    fillStatus(context){\r\n        this.$myApi.get(statusProductUrl)\r\n        .then(response=>{\r\n            context.commit('fillStatus',response.data)\r\n    })\r\n    },\r\n    fillProducts(context){\r\n        return new Promise((resolve, reject) => {\r\n            this.$myApi.get(productUrl)\r\n            .then(response=>{\r\n                resolve(response.data.hasPermission)\r\n                context.commit('fillProducts',response.data.productWithUser)\r\n            })\r\n            .catch(error => {\r\n              console.log(error)\r\n              reject(error)\r\n            })\r\n        })\r\n    },\r\n    fillProductById(context,object){\r\n        return new Promise((resolve, reject) => {\r\n        // console.log('estoy en llenado de producto', object)\r\n            var auth = object.auth\r\n            var id  = object.id\r\n            this.$myApi.get(productUrl+'/'+id)\r\n            .then(response=>{\r\n                resolve(response.data.hasPermission)\r\n                context.commit('fillProductById',response.data.ProductById)\r\n            })\r\n            .catch(error=>{\r\n                console.log(error)\r\n            })\r\n        })    \r\n    },\r\n    fillCharacteristicByProductId(context, object){\r\n        var auth = object.auth\r\n        var id =  object.id\r\n        this.$myApi.get(characteristicUrl+'/'+id)\r\n        .then(response=>{\r\n            context.commit('fillCharacteristicByProductId',response.data)\r\n        })\r\n        .catch(error=>{\r\n            console.log(error)\r\n        })\r\n    },\r\n    fillFileByProductId(context, object){\r\n        var auth = object.auth\r\n        var id =  object.id\r\n        this.$myApi.get(fileUrl+'/'+id)\r\n        .then(response=>{\r\n            context.commit('fillFileByProductId',response.data)\r\n        })\r\n        .catch(error=>{\r\n            console.log(error)\r\n        })\r\n    },\r\n    addFile(context,objFile){\r\n        context.commit('addFile',objFile)\r\n    },\r\n    deleteCharacteristic(context,objcharacteristic){\r\n            context.commit('deleteCharacteristic',objcharacteristic)\r\n    },\r\n    \r\n    deleteFileImage(context,number){\r\n        context.commit('deleteFileImage',number)\r\n    },\r\n    addFileImage(context){\r\n        context.commit('addFileImage')\r\n    },\r\n    emptyFile(context,index){\r\n        context.commit('emptyFile',index)\r\n    },\r\n    //creando en la base de datos\r\n    async CreateAndUpdateProductSubmit(context,object){\r\n        var auth = object.auth\r\n        var method = object.method\r\n        var id  = object.productId\r\n        var url = productUrl\r\n        if (method == 'put'){\r\n            url = productUrl + '/'+id\r\n        }\r\n        // console.log('number one')\r\n        // console.log(auth)\r\n        try{\r\n            const data = state.productObj\r\n            let response = await this.$myApi.post(url, {\r\n                name:             data.name,\r\n                modelo:           data.modelo,\r\n                quantity:         data.quantity,\r\n                brand:            data.brand,\r\n                price:            data.price,\r\n                category_id:      data.category_id,\r\n                peso:             data.peso,\r\n                alto:             data.alto,\r\n                ancho:            data.ancho,\r\n                fondo:            data.fondo,\r\n                parent_id:        0,\r\n                description:      data.description,\r\n                statusProduct_id: data.statusProduct_id,\r\n            })\r\n            if(response.data.create){\r\n                console.log('producto registrado con exito',response.data.create)\r\n            }\r\n            if(response.data.update){\r\n                console.log('producto actualizado con exito',response.data.update)\r\n            }\r\n            context.commit('CreateAndUpdateProductSubmit', response.data.product_id)\r\n            \r\n        }catch(ex){\r\n            console.log(ex)\r\n        }\r\n    },\r\n          //add image in farebase\r\n\r\n    uploadImageFirebase(context,fileForInsert){\r\n        return new Promise((resolve, reject) => {\r\n            for (let index = 0; index < fileForInsert.length; index++) {\r\n                const element = fileForInsert[index];\r\n                const uuid = element.uuid ;\r\n                // console.log('element', element)\r\n                // console.log('uuid', uuid)\r\n                // console.log(state.files[index])\r\n    \r\n                firebase.auth().signInWithEmailAndPassword(state.userFirebase,state.passFirebase)\r\n                .then(user => {\r\n                var storageRef =  firebase.storage().ref();\r\n                    var metadata = {\r\n                    contentType: element.file[0].type\r\n                    }\r\n                    const filename = element.file[0].name\r\n                    const ext = filename.slice(filename.lastIndexOf('.'))\r\n                    var uploadTask = storageRef.child('products/' + uuid + ext).put(element.file[0], metadata);\r\n\r\n                    uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, \r\n                    function(snapshot) {\r\n                        var progress =  (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                        console.log('['+index+']'+'Upload is ' + progress + '% done');\r\n                        switch (snapshot.state) {\r\n                        case firebase.storage.TaskState.PAUSED: \r\n                            console.log('Upload is paused');\r\n                            break;\r\n                        case firebase.storage.TaskState.RUNNING: \r\n                            console.log('Upload is running');\r\n                            break;\r\n                        }\r\n                    }, function(error) {\r\n                    switch (error.code) {\r\n                        case 'storage/unauthorized':\r\n                        // User doesn't have permission to access the object\r\n                        break;\r\n\r\n                        case 'storage/canceled':\r\n                        // User canceled the upload\r\n                        break;\r\n\r\n                        case 'storage/unknown':\r\n                        // Unknown error occurred, inspect error.serverResponse\r\n                        break;\r\n                    }\r\n                    }, function complete () {\r\n                    // Upload completed successfully, now we can get the download URL\r\n                        uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\r\n                            let objectFile={\r\n                                index: index,\r\n                                name: uuid + ext,\r\n                                urlFirebase:downloadURL\r\n                            }\r\n                            // //   console.log('tama;o Imagen', state.maxUploadImage-1)\r\n                            \r\n                            context.commit('addingImageFirebase',objectFile)\r\n                            console.log('File available at', downloadURL);\r\n                                if(fileForInsert.length == index+1){\r\n                                    console.log('entro para que siga el procedimiento')\r\n                                    resolve(true)\r\n                                }\r\n                        });\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    },\r\n\r\n    addingImageFirebase(context){\r\n        return new Promise((resolve, reject) => {\r\n            var countFile = state.files.length\r\n            var resultadoNew = state.files.filter( file => file.state === 'new' );\r\n            if(resultadoNew.length>0){\r\n                context.dispatch('uploadImageFirebase',resultadoNew).then((response) => {\r\n                    if(response){\r\n                        resolve(true)\r\n                        console.log('entro a insertar la imagen')\r\n                    }\r\n                })\r\n            }else{\r\n                resolve(true)\r\n                console.log('no hay que subir')\r\n            }\r\n        })\r\n\r\n        // console.log('resultado de estado mew',resultado)\r\n        // console.log('resultado contador de files',countFile)\r\n            // for (let index = 0; index < state.files.length; index++) {\r\n            //     const element = state.files[index];\r\n            //     const uuid = state.files[index].uuid ;\r\n                // console.log('element', element)\r\n                // console.log('uuid', uuid)\r\n                // console.log(state.files[index])\r\n\r\n\r\n\r\n                // if(element.state == 'new' || element.state =='update'){\r\n                //     context.dispatch('uploadImageFirebase',element).then((response) => {\r\n                //         if(index == (state.files.length-1)){\r\n                //             resolve(true)\r\n                //         }\r\n                        \r\n                //     })\r\n                // }\r\n            // }\r\n    },\r\n    CreateAndUpdateCharacteristic(context,object){\r\n        try{\r\n        var auth = object.auth\r\n        var id  = object.productId\r\n        var url = ''\r\n            for (let index = 0; index < state.characteristics.length; index++) {\r\n                const element = state.characteristics[index];\r\n                if(element.state =='edit'||element.state=='new'){\r\n                    if(element.state == 'edit'){\r\n                        url = characteristicUrl+'/'+element.id\r\n                    }else if(element.state =='new'){\r\n                        url = characteristicUrl\r\n                    }\r\n                    this.$myApi.post(url, {\r\n                        product_id:             state.productObj.id,\r\n                        characteristic:         element.characteristicName\r\n                    }).then(response=>{\r\n                        let objCharact={\r\n                            id:response.data.id,\r\n                            index : index\r\n                        }\r\n                        context.commit('CreateAndUpdateCharacteristic',objCharact)\r\n                        // console.log('caracteristica '+response.data.type+' con exito', response.data )\r\n                    })\r\n                }else {\r\n                    url = characteristicUrl+'/'+element.id\r\n                    this.$myApi.delete(url).then(response=>{\r\n                        console.log('se elimino correctamente', response)\r\n                        let obj = {\r\n                            index : index,\r\n                            state :'delete'\r\n                        }\r\n                        // context.commit('deleteCharacteristic',obj)\r\n                        console.log('caracteristica '+response.data.type+' con exito', response.data )\r\n                    })\r\n                }\r\n            }\r\n        }catch(ex){\r\n            console.log(ex)\r\n        }\r\n    },\r\n    createAndUpdateFileProduct(context,object){\r\n        try{\r\n            var auth = object.auth\r\n            var url = fileUrl\r\n            for (let index = 0; index < state.files.length; index++) {\r\n                const element = state.files[index];\r\n                if(element.state == 'update' || element.state == 'new'){\r\n                    if(element.state == 'update'){\r\n                        url = url+'/'+element.id\r\n                    }\r\n                    this.$myApi.post(url, {\r\n                        product_id:     state.productObj.id,\r\n                        name:           element.name,\r\n                        path:           element.url\r\n                    }).then(response=>{\r\n                        let objCharact={\r\n                            id:response.id,\r\n                            name:response.name,\r\n                            index : index\r\n                        }\r\n                        context.commit('createAndUpdateFileProduct',objCharact)\r\n                        console.log('imagenes registradas con exito',response.data.saved)\r\n                    })\r\n                }\r\n            }\r\n        }catch(ex){\r\n            console.log(ex)\r\n        }\r\n    },\r\n    deleteImageFirebaseAndDataBase(context, object){\r\n        var auth = object.auth\r\n        if(state.fileForDelete.length > 0){\r\n            firebase.auth().signInWithEmailAndPassword(state.userFirebase,state.passFirebase)\r\n            .then(user => {\r\n            for (let index = 0; index < state.fileForDelete.length; index++) {\r\n                const element = state.fileForDelete[index];\r\n                    var storage = firebase.storage();\r\n                    var storageRef = storage.ref();\r\n                    var desertRef = storageRef.child('/products/'+element.name);\r\n                    desertRef.delete().then(function() {\r\n                        console.log('se elimino correctamente de firebase su imagen')\r\n                    }).catch(function(error) {\r\n                    // Uh-oh, an error occurred!\r\n                    });\r\n                    this.$myApi.delete(fileUrl+'/'+element.id).then(response =>{\r\n                        console.log('imagen eliminada correctamente de la base de datos')\r\n                    })\r\n            }\r\n            context.commit('deleteImageFirebaseAndDataBase')\r\n            })\r\n        }\r\n    },\r\n    putImage(context,object){\r\n        context.commit('putImage',object)  \r\n    },\r\n    clearFields(context){\r\n        context.commit('clearFields')\r\n    },\r\n\r\n    addCharacteristic(context){\r\n        context.commit('addCharacteristic')\r\n    }\r\n}\r\n\r\n\r\nexport default{\r\n    strict, state, getters, mutations, actions\r\n}\r\n"]}]}